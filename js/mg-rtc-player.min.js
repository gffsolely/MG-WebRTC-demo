!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).index=e()}(this,function(){"use strict";function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var h=h||{};function _(t){return document.querySelector(t)}function d(t,e){return"true"===e.opusStereo?t=f(t,"opus/48000","stereo","1"):"false"===e.opusStereo&&(t=n(t,"opus/48000","stereo")),"true"===e.opusFec?t=f(t,"opus/48000","useinbandfec","1"):"false"===e.opusFec&&(t=n(t,"opus/48000","useinbandfec")),"true"===e.opusDtx?t=f(t,"opus/48000","usedtx","1"):"false"===e.opusDtx&&(t=n(t,"opus/48000","usedtx")),e.opusMaxPbr&&(t=f(t,"opus/48000","maxplaybackrate",e.opusMaxPbr)),t}function l(t,e,n){var o=t.split("\r\n"),i=I(o,"m=",n);if(null===i)return h.trace("Failed to add bandwidth line to sdp, as no m-line found","sdputils.preferBitRate"),t;var r=C(o,i+1,-1,"m=");null===r&&(r=o.length);var s=C(o,i+1,r,"c=");if(null===s)return h.trace("Failed to add bandwidth line to sdp, as no c-line found","sdputils.preferBitRate"),t;var a=C(o,s+1,r,"b=AS");a&&o.splice(a,1);var u="b=AS:"+e;return o.splice(s+1,0,u),t=o.join("\r\n")}function s(t,e){t=t.split(" ");for(var n=0;n<t.length;++n)t[n]===e.toString()&&t.splice(n,1);return t.join(" ")}function a(t,e){var n=I(t,"a=rtpmap",e.toString());if(null===n)return t;t.splice(n,1);var o=I(t,"m=","video");return null===o||(t[o]=s(t[o],e)),t}function c(t,e){if("false"!==e.videoFec)return t;var n=t.split("\r\n"),o=I(n,"a=rtpmap","red");if(null===o)return t;var i=S(n[o]);if(n=function(t,e){var n=I(t,"a=rtpmap",e);if(null===n)return t;var o=S(t[n]);t.splice(n,1);var i=I(t,"m=","video");return null===i||(t[i]=s(t[i],o)),t}(n=a(n,i),"ulpfec"),null===(o=I(n,"a=fmtp",i.toString())))return t;var r=g(n[o]).pt;return null===r?t:(n.splice(o,1),(n=a(n,r)).join("\r\n"))}function b(t,e,n,o){if(!o)return t;var i=t.split("\r\n"),r=I(i,"m=",e);if(null===r)return t;for(var s=null,a=i.length-1;0<=a;--a){var u=C(i,a,0,"a=rtpmap",o,"desc");if(null===u)break;(s=S(i[a=u]))&&(i[r]=v(i[r],s))}return t=i.join("\r\n")}function f(t,e,n,o){var i=t.split("\r\n"),r=m(i,e),s={};if(null===r){var a=I(i,"a=rtpmap",e);if(null===a)return t;var u=S(i[a]);s.pt=u.toString(),s.params={},s.params[n]=o,i.splice(a+1,0,y(s))}else(s=g(i[r])).params[n]=o,i[r]=y(s);return t=i.join("\r\n")}function n(t,e,n){var o=t.split("\r\n"),i=m(o,e);if(null===i)return t;var r=g(o[i]);delete r.params[n];var s=y(r);return null===s?o.splice(i,1):o[i]=s,t=o.join("\r\n")}function g(t){var e={},n=t.indexOf(" "),o=t.substring(n+1).split(";"),i=new RegExp("a=fmtp:(\\d+)"),r=t.match(i);if(!r||2!==r.length)return null;e.pt=r[1];for(var s={},a=0;a<o.length;++a){var u=o[a].split("=");2===u.length&&(s[u[0]]=u[1])}return e.params=s,e}function y(t){if(!t.hasOwnProperty("pt")||!t.hasOwnProperty("params"))return null;var e=t.pt,n=t.params,o=[],i=0;for(var r in n)o[i]=r+"="+n[r],++i;return 0===i?null:"a=fmtp:"+e.toString()+" "+o.join(";")}function m(t,e){var n,o,i=(o=I(n=t,"a=rtpmap",e))?S(n[o]):null;return i?I(t,"a=fmtp:"+i.toString()):null}function I(t,e,n){return C(t,0,-1,e,n)}function C(t,e,n,o,i,r){if(void 0===r&&(r="asc"),"asc"===(r=r||"asc")){for(var s=-1!==n?n:t.length,a=e;a<s;++a)if(0===t[a].indexOf(o)&&(!i||-1!==t[a].toLowerCase().indexOf(i.toLowerCase())))return a}else for(var u=-1!==e?e:t.length-1;0<=u;--u)if(0===t[u].indexOf(o)&&(!i||-1!==t[u].toLowerCase().indexOf(i.toLowerCase())))return u;return null}function S(t){var e=new RegExp("a=rtpmap:(\\d+) [a-zA-Z0-9-]+\\/\\d+"),n=t.match(e);return n&&2===n.length?n[1]:null}function v(t,e){var n=t.split(" "),o=n.slice(0,3);o.push(e);for(var i=3;i<n.length;i++)n[i]!==e&&o.push(n[i]);return o.join(" ")}h.queryStringToDictionary=function(t){var e=t.slice(1).split("&"),n={};return e.forEach(function(t){t&&(t=t.split("="))[0]&&(n[t[0]]=decodeURIComponent(t[1]||""))}),n},h.sendAsyncUrlRequest=function(t,e,n){return h.sendUrlRequest(t,e,!0,n)},h.sendUrlRequest=function(i,r,s,a){return new Promise(function(t,e){function n(){200===o.status?t(o.responseText):e(Error("Status="+o.status+", response="+o.responseText))}var o;o=new XMLHttpRequest,s&&(o.onreadystatechange=function(){4===o.readyState&&n()}),o.open(i,r,s),o.send(a),s||n()})},h.requestIceServers=function(t,i){return new Promise(function(n,o){h.sendAsyncUrlRequest("POST",t).then(function(t){var e=h.parseJSON(t);e?(""!==i&&h.filterIceServersUrls(e,i),h.trace("Retrieved ICE server information.","util.requestIceServers"),n(e)):o(Error("Error parsing response JSON: "+t),"util.requestIceServers")}).catch(function(t){o(Error("ICE server request error: "+t.message),"util.requestIceServers")})})},h.parseJSON=function(e){try{return JSON.parse(e)}catch(t){h.trace("Error parsing json: "+e,"util.parseJSON")}return null},h.filterIceServersUrls=function(t,e){for(var n="transport="+e,o=[],i=0;i<t.iceServers.length;++i){for(var r=t.iceServers[i],s=[],a=0;a<r.urls.length;++a){var u=r.urls[a];-1!==u.indexOf(n)?s.push(u):-1===u.indexOf("?transport=")&&s.push(u+"?"+n)}0!==s.length&&(r.urls=s,o.push(r))}t.iceServers=o},h.setUpFullScreen=function(){h.isChromeApp()?document.cancelFullScreen=function(){chrome.app.window.current().restore()}:document.cancelFullScreen=document.webkitCancelFullScreen||document.mozCancelFullScreen||document.cancelFullScreen,h.isChromeApp()?document.body.requestFullScreen=function(){chrome.app.window.current().fullscreen()}:document.body.requestFullScreen=document.body.webkitRequestFullScreen||document.body.mozRequestFullScreen||document.body.requestFullScreen,document.onfullscreenchange=document.onfullscreenchange||document.onwebkitfullscreenchange||document.onmozfullscreenchange},h.isFullScreen=function(){return h.isChromeApp()?chrome.app.window.current().isFullscreen():!!(document.webkitIsFullScreen||document.mozFullScreen||document.isFullScreen)},h.fullScreenElement=function(){return document.webkitFullScreenElement||document.webkitCurrentFullScreenElement||document.mozFullScreenElement||document.fullScreenElement},h.randomString=function(t){var e=[];t=t||5;for(var n="0123456789";t--;)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")},h.isChromeApp=function(){return"undefined"!=typeof chrome&&void 0!==chrome.storage&&void 0!==chrome.storage.local},h.calculateFps=function(t,e,n,o,i){var r=0;if(t&&void 0!==p(t.webkitDecodedFrameCount)&&t.readyState>=t.HAVE_CURRENT_DATA){var s=(new Date).getTime(),a=(s-n)/1e3,u=s;r=(t.webkitDecodedFrameCount-e)/a,i(t.webkitDecodedFrameCount,u,o)}return parseInt(r)},h.getNowFormatDate=function(){var t=new Date,e=t.getMonth()+1,n=t.getDate();return 1<=e&&e<=9&&(e="0"+e),0<=n&&n<=9&&(n="0"+n),t.getFullYear()+"-"+e+"-"+n+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()},h.trace=function(t,e){console.log(h.getNowFormatDate().split(" ")[1]+" MgRTC-SDK [DEBUG] : "+e,t)},h.getQueryString=function(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),n=window.location.search.substr(1).match(e);return null!=n?unescape(n[2]):null},h.getUniqueId=function(t){var o=function(){return Number(Math.random().toString().substr(2)).toString(36)},i=[];function r(){var e=o(),n=!1;i.forEach(function(t){t===e&&(n=!0)}),n?r():i.push(e)}if(t){for(var e=0;e<t;)r(),e++;return i}return r(),i[0]},h.getIsPc=function(){var t=navigator.userAgent.toLowerCase(),e="ipad"==t.match(/ipad/i),n="iphone os"==t.match(/iphone os/i),o="midp"==t.match(/midp/i),i="rv:1.2.3.4"==t.match(/rv:1.2.3.4/i),r="ucweb"==t.match(/ucweb/i),s="android"==t.match(/android/i),a="windows ce"==t.match(/windows ce/i),u="windows mobile"==t.match(/windows mobile/i);return!(e||n||o||i||r||s||a||u)},h.elementDrag=function(t,o){if(h.getIsPc()){var u=_(t);u.onmousedown=function(t){var s,a,e=t||event,n=u.offsetLeft;return s=e.clientX-u.offsetLeft,a=e.clientY-u.offsetTop,document.onmousemove=function(t){var e=t||event,n=e.clientX-s,o=e.clientY-a,i=document.documentElement.clientWidth-u.offsetWidth,r=document.documentElement.clientHeight-u.offsetHeight;n<0?n=0:i<n&&(n=i),o<0?o=0:r<o&&(o=r),u.style.left=n+"px",u.style.top=o+"px"},!(document.onmouseup=function(t){document.onmousemove=null,document.onmouseup=null;var e=u.offsetLeft;n==e&&o&&o()})}}else{var i,r,s,a,p,d,l=_(t),e=l.clientWidth,c=document.documentElement.clientHeight-e,b=document.documentElement.clientWidth-e;l.addEventListener("touchstart",function(t){i=t.touches[0].pageX,r=t.touches[0].pageY;var e=window.getComputedStyle?window.getComputedStyle(l,null):l.currentStyle;p=parseInt(e.left.replace("px","")),d=parseInt(e.top.replace("px",""))},!1),l.addEventListener("touchmove",function(t){s=t.touches[0].pageX,a=t.touches[0].pageY;var e=parseFloat(s)-parseFloat(i)+parseFloat(p),n=parseFloat(a)-parseFloat(r)+parseFloat(d);e<0?e=0:b<e&&(e=b),n<0?n=0:c<n&&(n=c),l.style.left=e+"px",l.style.top=n+"px"},!1),l.addEventListener("touchend",function(t){var e=t.changedTouches[0].pageX;t.changedTouches[0].pageY;i==e&&o&&o()},!1),_("body").addEventListener("touchmove",function(t){t.preventDefault()},{passive:!1})}},h.objAssign=function(t,e){t=t||{};for(var n in e)"object"!==p(e[n])||"object"!==p(t[n])?t[n]=e[n]:h.objAssign(t[n],e[n]);return t},h.clone=function(t){if(null==t||"object"!=p(t))return t;if(t instanceof Date)return(e=new Date).setTime(t.getTime()),e;if(t instanceof Array){for(var e=[],n=0,o=t.length;n<o;++n)e[n]=h.clone(t[n]);return e}if(t instanceof Object){e={};for(var i in t)t.hasOwnProperty(i)&&(e[i]=h.clone(t[i]));return e}return{}},h.Uint8ArrayToString=function(t){for(var e="",n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},h.stringToUint8Array=function(t){for(var e=[],n=0,o=t.length;n<o;++n)e.push(t.charCodeAt(n));return new Uint8Array(e)},h.checkConsoleOpen=function(){({onOpen:function(){window.location.href="/"},init:function(){var t=this,e=document.createElement("div"),n=!1;Object.defineProperty(e,"id",{get:function(){n||(t.onOpen(),n=!0)}}),console.info(e)}}).init()};function o(t,e){this.params_=t,this.startTime_=e,h.trace({config:t.peerConnectionConfig,constraints:t.peerConnectionConstraints},"PeerConnectionClient Creating RTCPeerConnnection "),this.pc_=new RTCPeerConnection(t.peerConnectionConfig,t.peerConnectionConstraints),this.pc_.onicecandidate=this.onIceCandidate_.bind(this),this.pc_.ontrack=this.onRemoteStreamAdded_.bind(this),this.pc_.onremovestream=h.trace.bind(null,"Remote stream removed."),this.pc_.onsignalingstatechange=this.onSignalingStateChanged_.bind(this),this.pc_.oniceconnectionstatechange=this.onIceConnectionStateChanged_.bind(this),window.dispatchEvent(new CustomEvent("pccreated",{detail:{pc:this,time:new Date,userId:this.params_.roomId+(this.isInitiator_?"-0":"-1"),sessionId:this.params_.roomId}})),this.hasRemoteSdp_=!1,this.messageQueue_=[],this.isInitiator_=!1,this.started_=!1,this.pcStatsInterval_=null,this.onerror=null,this.oniceconnectionstatechange=null,this.onnewicecandidate=null,this.onremotehangup=null,this.onremotesdpset=null,this.onremotestreamadded=null,this.onsignalingmessage=null,this.onsignalingstatechange=null,this.onpeerclientstats=null}o.DEFAULT_SDP_OFFER_OPTIONS_={offerToReceiveAudio:1,offerToReceiveVideo:1,voiceActivityDetection:!1},o.prototype.addStream=function(t){this.pc_&&this.pc_.addStream(t)},o.prototype.startAsCaller=function(t){if(!this.pc_)return!1;if(this.started_)return!1;this.isInitiator_=!0,this.started_=!0;var e=function(t,e){if(!t||!e)return t||e;var n=t;for(var o in e)n[o]=e[o];return n}(o.DEFAULT_SDP_OFFER_OPTIONS_,t);return this.pc_.createOffer(e).then(this.setLocalSdpAndNotify_.bind(this)).catch(this.onError_.bind(this,"createOffer")),!0},o.prototype.startAsCallee=function(t){if(!this.pc_)return!1;if(this.started_)return!1;if(this.isInitiator_=!1,this.started_=!0,t&&0<t.length){for(var e=0,n=t.length;e<n;e++)this.receiveSignalingMessage(t[e]);return!0}return 0<this.messageQueue_.length&&this.drainMessageQueue_(),!0},o.prototype.receiveSignalingMessage=function(t){var e=h.parseJSON(t);e&&(this.isInitiator_&&"answer"===e.type||!this.isInitiator_&&"offer"===e.type?(this.hasRemoteSdp_=!0,this.messageQueue_.unshift(e)):"candidate"===e.type?this.messageQueue_.push(e):"bye"===e.type&&this.onremotehangup&&this.onremotehangup(),this.drainMessageQueue_())},o.prototype.close=function(){this.pc_&&(this.pcStatsInterval_&&(clearInterval(this.pcStatsInterval_),this.pcStatsInterval_=null),this.pc_.close(),window.dispatchEvent(new CustomEvent("pcclosed",{detail:{pc:this,time:new Date}})),this.pc_=null)},o.prototype.getPeerConnectionStates=function(){return this.pc_?{signalingState:this.pc_.signalingState,iceGatheringState:this.pc_.iceGatheringState,iceConnectionState:this.pc_.iceConnectionState}:null},o.prototype.getPeerConnectionStats=function(t){this.pc_&&this.pc_.getStats(null).then(t)},o.prototype.doAnswer_=function(){h.trace("Sending answer to peer.","PeerConnectionClient.doAnswer_"),this.pc_.createAnswer().then(this.setLocalSdpAndNotify_.bind(this)).catch(this.onError_.bind(this,"createAnswer"))},o.prototype.setLocalSdpAndNotify_=function(t){var e,n,o,i,r,s,a,u;t.sdp=d(t.sdp,this.params_),t.sdp=(e=t.sdp,n=this.params_,b(e,"audio",0,n.audioRecvCodec)),t.sdp=(o=t.sdp,i=this.params_,b(o,"video",0,i.videoRecvCodec)),t.sdp=(r=t.sdp,(s=this.params_).audioRecvBitrate?l(r,s.audioRecvBitrate,"audio"):r),t.sdp=(a=t.sdp,(u=this.params_).videoRecvBitrate?l(a,u.videoRecvBitrate,"video"):a),t.sdp=c(t.sdp,this.params_),this.pc_.setLocalDescription(t).then(h.trace.bind(null,"Set session description success.")).catch(this.onError_.bind(this,"setLocalDescription")),this.onsignalingmessage&&this.onsignalingmessage({sdp:t.sdp,type:t.type})},o.prototype.setRemoteSdp_=function(t){var e,n,o,i,r,s,a,u;t.sdp=d(t.sdp,this.params_),t.sdp=(e=t.sdp,n=this.params_,b(e,"audio",0,n.audioSendCodec)),t.sdp=(o=t.sdp,i=this.params_,b(o,"video",0,i.videoSendCodec)),t.sdp=(r=t.sdp,(s=this.params_).audioSendBitrate?l(r,s.audioSendBitrate,"audio"):r),t.sdp=(a=t.sdp,(u=this.params_).videoSendBitrate?l(a,u.videoSendBitrate,"video"):a),t.sdp=function(t,e){var n=parseInt(e.videoSendInitialBitrate);if(!n)return t;var o=parseInt(n),i=parseInt(e.videoSendBitrate);i&&(i<n&&(h.trace("Clamping initial bitrate to max bitrate of "+i+" kbps.","sdputils.maybeSetVideoSendInitialBitRate"),n=i,e.videoSendInitialBitrate=n),o=i);var r=t.split("\r\n"),s=I(r,"m=","video");if(null===s)return h.trace("Failed to find video m-line","sdputils.maybeSetVideoSendInitialBitRate"),t;var a=r[s],u=new RegExp("m=video\\s\\d+\\s[A-Z/]+\\s"),p=a.split(u)[1].split(" ")[0],d=r[I(r,"a=rtpmap",p)].split("a=rtpmap:"+p)[1].split("/")[0],l=e.videoSendCodec||d;return t=f(t,l,"x-google-min-bitrate",e.videoSendInitialBitrate.toString()),t=f(t,l,"x-google-max-bitrate",o.toString())}(t.sdp,this.params_),t.sdp=c(t.sdp,this.params_),this.pc_.setRemoteDescription(new RTCSessionDescription(t)).then(this.onSetRemoteDescriptionSuccess_.bind(this)).catch(this.onError_.bind(this,"setRemoteDescription"))},o.prototype.onSetRemoteDescriptionSuccess_=function(){h.trace("Set remote session description success.","PeerConnectionClient.onSetRemoteDescriptionSuccess_");var t=this.pc_.getRemoteStreams();if(this.onremotesdpset){this.onremotesdpset(0<t.length&&0<t[0].getVideoTracks().length);var e=this,i={},r=0,s=0;this.pcStatsInterval_=window.setInterval(function(){e.pc_.getStats(null).then(function(t){var n="",o="";t.forEach(function(t){t.state&&"succeeded"==t.state&&(i={totalRoundTripTime:Math.round(1e3*t.totalRoundTripTime)/1e3,currentRoundTripTime:Math.round(1e3*t.currentRoundTripTime)/1e3}),-1<t.id.indexOf("RTCInboundRTPVideoStream")&&(n=t.trackId,o=t.codecId,Object.assign(i,{keyFramesDecoded:t.keyFramesDecoded,totalDecodeTime:Math.round(1e3*t.totalDecodeTime)/1e3,totalInterFrameDelay:Math.round(1e3*t.totalInterFrameDelay)/1e3,totalSquaredInterFrameDelay:Math.round(1e3*t.totalSquaredInterFrameDelay)/1e3}))}),t.forEach(function(t){if(t.id===n){Object.assign(i,{jitterBufferDelay:Math.round(1e3*t.jitterBufferDelay)/1e3,jitterBufferEmittedCount:t.jitterBufferEmittedCount,frameWidth:t.frameWidth,frameHeight:t.frameHeight,framesReceived:Math.round((t.framesReceived-r)/5),framesDecoded:Math.round((t.framesDecoded-s)/5)});var e=i.framesReceived-i.framesDecoded;i.framesDropped=e<0?0:e,r=t.framesReceived,s=t.framesDecoded,t.framesDropped}t.id===o&&Object.assign(i,{mimeType:t.mimeType})}),e.onpeerclientstats&&e.onpeerclientstats(i)})},5e3)}},o.prototype.processSignalingMessage_=function(t){if("offer"!==t.type||this.isInitiator_)if("answer"===t.type&&this.isInitiator_){if("have-local-offer"!==this.pc_.signalingState)return void h.trace("ERROR: remote answer received in unexpected state: "+this.pc_.signalingState,"PeerConnectionClient.processSignalingMessage_");this.setRemoteSdp_(t)}else if("candidate"===t.type){var e=new RTCIceCandidate({sdpMLineIndex:t.label,candidate:t.candidate});this.recordIceCandidate_("Remote",e),this.pc_.addIceCandidate(e).then(h.trace.bind(null,"Remote candidate added successfully.")).catch(this.onError_.bind(this,"addIceCandidate"))}else h.trace(t,"PeerConnectionClient WARNING: unexpected message ");else{if("stable"!==this.pc_.signalingState)return void h.trace("ERROR: remote offer received in unexpected state: "+this.pc_.signalingState,"PeerConnectionClient.processSignalingMessage_");this.setRemoteSdp_(t),this.doAnswer_()}},o.prototype.drainMessageQueue_=function(){if(this.pc_&&this.started_&&this.hasRemoteSdp_){for(var t=0,e=this.messageQueue_.length;t<e;t++)this.processSignalingMessage_(this.messageQueue_[t]);this.messageQueue_=[]}},o.prototype.onIceCandidate_=function(t){if(t.candidate){if(this.filterIceCandidate_(t.candidate)){var e={type:"candidate",label:t.candidate.sdpMLineIndex,id:t.candidate.sdpMid,candidate:t.candidate.candidate};this.onsignalingmessage&&this.onsignalingmessage(e),this.recordIceCandidate_("Local",t.candidate)}}else h.trace("End of candidates.","PeerConnectionClient.onIceCandidate_")},o.prototype.onSignalingStateChanged_=function(){this.pc_&&(h.trace("Signaling state changed to: "+this.pc_.signalingState,"PeerConnectionClient.onSignalingStateChanged_"),this.onsignalingstatechange&&this.onsignalingstatechange("pc.onSignalingStateChanged",this.pc_.signalingState))},o.prototype.onIceConnectionStateChanged_=function(){this.pc_&&(h.trace("ICE connection state changed to: "+this.pc_.iceConnectionState,"PeerConnectionClient.onIceConnectionStateChanged_"),"completed"===this.pc_.iceConnectionState&&h.trace("ICE complete time: "+(window.performance.now()-this.startTime_).toFixed(0)+"ms.","PeerConnectionClient.onIceConnectionStateChanged_"),this.oniceconnectionstatechange&&this.oniceconnectionstatechange("pc.onIceConnectionStateChanged",this.pc_.iceConnectionState))},o.prototype.filterIceCandidate_=function(t){var e=t.candidate;return-1===e.indexOf("tcp")&&("relay"!==this.params_.peerConnectionConfig.iceTransports||"relay"===e.split(" ")[7])},o.prototype.recordIceCandidate_=function(t,e){this.onnewicecandidate&&this.onnewicecandidate("pc.recordIceCandidate",t+":"+e.candidate)},o.prototype.onRemoteStreamAdded_=function(t){this.onremotestreamadded&&this.onremotestreamadded(t.streams[0])},o.prototype.onError_=function(t,e){this.onerror&&this.onerror(t+": "+e.toString())};function e(t,e){this.wssUrl_=t,this.wssPostUrl_=e,this.roomId_=null,this.clientId_=null,this.websocket_=null,this.registered_=!1,this.onerror=null,this.onmessage=null}e.prototype.open=function(){if(!this.websocket_)return h.trace("Opening signaling channel."),new Promise(function(t,e){this.websocket_=new WebSocket(this.wssUrl_),this.websocket_.onopen=function(){h.trace("Signaling channel opened.","SignalingChannel."),this.websocket_.onerror=function(){h.trace("Signaling channel error.","SignalingChannel.")},this.websocket_.onclose=function(t){h.trace("Channel closed with code:"+t.code+" reason:"+t.reason,"SignalingChannel."),this.websocket_=null,this.registered_=!1},this.clientId_&&this.roomId_&&this.register(this.roomId_,this.clientId_),t()}.bind(this),this.websocket_.onmessage=function(t){h.trace(JSON.parse(t.data),"SignalingChannel.");var e=h.parseJSON(t.data);e?e.error?h.trace("Signaling server error message: "+e.error,"SignalingChannel."):this.onmessage(e.msg):h.trace(JSON.parse(t.data),"SignalingChannel. Failed to parse WSS message  WSS->C  ")}.bind(this),this.websocket_.onerror=function(){e(Error("WebSocket error."))}}.bind(this));h.trace("ERROR: SignalingChannel has already opened.","SignalingChannel.")},e.prototype.register=function(t,e){if(this.registered_)h.trace("ERROR: SignalingChannel has already registered.","SignalingChannel.");else if(this.roomId_=t,this.clientId_=e,this.roomId_||h.trace("ERROR: missing roomId.","SignalingChannel."),this.clientId_||h.trace("ERROR: missing clientId.","SignalingChannel."),this.websocket_&&this.websocket_.readyState===WebSocket.OPEN){h.trace("Registering signaling channel.","SignalingChannel.");var n={cmd:"register",roomid:this.roomId_,clientid:this.clientId_};this.websocket_.send(JSON.stringify(n)),this.registered_=!0,h.trace("Signaling channel registered.","SignalingChannel.")}else h.trace("WebSocket not open yet; saving the IDs to register later.")},e.prototype.close=function(t){if(this.websocket_&&(this.websocket_.close(),this.websocket_=null),this.clientId_&&this.roomId_){var e=this.getWssPostUrl();return h.sendUrlRequest("DELETE",e,t).catch(function(t){h.trace("Error deleting web socket connection: "+t.message,"SignalingChannel.")}.bind(this)).then(function(){this.clientId_=null,this.roomId_=null,this.registered_=!1}.bind(this))}},e.prototype.send=function(t){if(this.roomId_&&this.clientId_){h.trace(JSON.parse(t),"SignalingChannel. C->WSS:");var e={cmd:"send",msg:t},n=JSON.stringify(e);if(this.websocket_&&this.websocket_.readyState===WebSocket.OPEN)this.websocket_.send(n);else{var o=this.getWssPostUrl(),i=new XMLHttpRequest;i.open("POST",o,!0),i.send(e.msg)}}else h.trace("ERROR: SignalingChannel has not registered.")},e.prototype.getWssPostUrl=function(){return this.wssPostUrl_+"/"+this.roomId_+"/"+this.clientId_};function i(t){this.params_=t,this.roomServer_=t.roomServer||"",this.channel_=new e(t.wssUrl,t.wssPostUrl),this.channel_.onmessage=this.onRecvSignalingChannelMessage_.bind(this),this.pcClient_=null,this.localStream_=null,this.errorMessageQueue_=[],this.startTime=null,this.oncallerstarted=null,this.onerror=null,this.oniceconnectionstatechange=null,this.onnewicecandidate=null,this.onremotehangup=null,this.onremotesdpset=null,this.onremotestreamadded=null,this.onsignalingstatechange=null,this.onpeerclientstats=null,this.getIceServersPromise_=null,this.requestMediaAndIceServers_()}i.prototype.requestMediaAndIceServers_=function(){this.getIceServersPromise_=this.maybeGetIceServers_()},i.prototype.isInitiator=function(){return this.params_.isInitiator},i.prototype.start=function(t){this.connectToRoom_(t),this.params_.isLoopback&&setupLoopback(this.params_.wssUrl,t)},i.prototype.queueCleanupMessages_=function(){apprtc.windowPort.sendMessage({action:Constants.QUEUEADD_ACTION,queueMessage:{action:Constants.XHR_ACTION,method:"POST",url:this.getLeaveUrl_(),body:null}}),apprtc.windowPort.sendMessage({action:Constants.QUEUEADD_ACTION,queueMessage:{action:Constants.WS_ACTION,wsAction:Constants.WS_SEND_ACTION,data:JSON.stringify({cmd:"send",msg:JSON.stringify({type:"bye"})})}}),apprtc.windowPort.sendMessage({action:Constants.QUEUEADD_ACTION,queueMessage:{action:Constants.XHR_ACTION,method:"DELETE",url:this.channel_.getWssPostUrl(),body:null}})},i.prototype.clearCleanupQueue_=function(){apprtc.windowPort.sendMessage({action:Constants.QUEUECLEAR_ACTION})},i.prototype.restart=function(){this.requestMediaAndIceServers_(),this.start(this.params_.previousRoomId)},i.prototype.hangup=function(e){if(this.startTime=null,h.isChromeApp()&&this.clearCleanupQueue_(),this.params_.roomId){this.pcClient_&&(this.pcClient_.close(),this.pcClient_=null);var t=[];if(t.push({step:function(){var t=this.getLeaveUrl_();return h.sendUrlRequest("POST",t,e)}.bind(this),errorString:"Error sending /leave:"}),t.push({step:function(){this.channel_.send(JSON.stringify({type:"bye"}))}.bind(this),errorString:"Error sending bye:"}),t.push({step:function(){return this.channel_.close(e)}.bind(this),errorString:"Error closing signaling channel:"}),t.push({step:function(){this.params_.previousRoomId=this.params_.roomId,this.params_.roomId=null,this.params_.clientId=null}.bind(this),errorString:"Error setting params:"}),e){for(var n=function(t,e){h.trace(t+" "+e.message,"Call.hangup")},o=Promise.resolve(),i=0;i<t.length;++i)o=o.then(t[i].step).catch(n.bind(this,t[i].errorString));return o}for(var r=function(t,e){try{t()}catch(t){h.trace(e+" "+t,"Call.hangup")}},s=0;s<t.length;++s)r(t[s].step,t[s].errorString);return null!==this.params_.roomId||null!==this.params_.clientId?h.trace("ERROR: sync cleanup tasks did not complete successfully.","Call.hangup"):h.trace("Cleanup completed.","Call.hangup"),Promise.resolve()}},i.prototype.getLeaveUrl_=function(){return this.roomServer_+"/leave/"+this.params_.roomId+"/"+this.params_.clientId},i.prototype.onRemoteHangup=function(){this.startTime=null,this.params_.isInitiator=!0,this.pcClient_&&(this.pcClient_.close(),this.pcClient_=null),this.startSignaling_()},i.prototype.getPeerConnectionStates=function(){return this.pcClient_?this.pcClient_.getPeerConnectionStates():null},i.prototype.getPeerConnectionStats=function(t){this.pcClient_&&this.pcClient_.getPeerConnectionStats(t)},i.prototype.toggleVideoMute=function(){var t=this.localStream_.getVideoTracks();if(0!==t.length){h.trace("Toggling video mute state.");for(var e=0;e<t.length;++e)t[e].enabled=!t[e].enabled;h.trace("Video "+(t[0].enabled?"unmuted.":"muted."))}else h.trace("No local video available.")},i.prototype.toggleAudioMute=function(){var t=this.localStream_.getAudioTracks();if(0!==t.length){h.trace("Toggling audio mute state.");for(var e=0;e<t.length;++e)t[e].enabled=!t[e].enabled;h.trace("Audio "+(t[0].enabled?"unmuted.":"muted."))}else h.trace("No local audio available.")},i.prototype.connectToRoom_=function(t){this.params_.roomId=t;var e=this.channel_.open().catch(function(t){return this.onError_("WebSocket open error: "+t.message),Promise.reject(t)}.bind(this)),n=this.joinRoom_().then(function(t){this.params_.clientId=t.client_id,this.params_.roomId=t.room_id,this.params_.roomLink=t.room_link,this.params_.isInitiator="true"===t.is_initiator,this.params_.messages=t.messages}.bind(this)).catch(function(t){return this.onError_("Room server join error: "+t.message),Promise.reject(t)}.bind(this));Promise.all([e,n]).then(function(){this.channel_.register(this.params_.roomId,this.params_.clientId),Promise.all([this.getIceServersPromise_]).then(function(){this.startSignaling_(),h.isChromeApp()&&this.queueCleanupMessages_()}.bind(this)).catch(function(t){this.onError_("Failed to start signaling: "+t.message)}.bind(this))}.bind(this)).catch(function(t){this.onError_("WebSocket register error: "+t.message)}.bind(this))},i.prototype.maybeGetIceServers_=function(){var t=null;if(this.params_.iceServerRequestUrl&&0<this.params_.iceServerRequestUrl.length&&!this.params_.peerConnectionConfig.iceServers){var e=this.params_.iceServerRequestUrl;t=h.requestIceServers(e,this.params_.iceServerTransports).then(function(t){this.params_.peerConnectionConfig=t}.bind(this)).catch(function(t){h.trace(t.message,"Call.maybeGetIceServers_")}.bind(this))}else t=Promise.resolve();return t},i.prototype.onUserMediaError_=function(t){var e="Failed to get access to local media. Error name was "+t.name+". Continuing without sending a stream.";this.onError_("getUserMedia error: "+e),this.errorMessageQueue_.push(t),alert(e)},i.prototype.maybeCreatePcClientAsync_=function(){return new Promise(function(e,n){if(this.pcClient_)e();else if("function"==typeof RTCPeerConnection.generateCertificate){RTCPeerConnection.generateCertificate({name:"ECDSA",namedCurve:"P-256"}).then(function(t){h.trace("ECDSA certificate generated successfully.","Call.maybeCreatePcClientAsync_"),this.params_.peerConnectionConfig.certificates=[t],this.createPcClient_(),e()}.bind(this)).catch(function(t){h.trace("ECDSA certificate generation failed.","Call.maybeCreatePcClientAsync_"),n(t)})}else this.createPcClient_(),e()}.bind(this))},i.prototype.createPcClient_=function(){this.pcClient_=new o(this.params_,this.startTime),this.pcClient_.onsignalingmessage=this.sendSignalingMessage_.bind(this),this.pcClient_.onremotehangup=this.onremotehangup,this.pcClient_.onremotesdpset=this.onremotesdpset,this.pcClient_.onremotestreamadded=this.onremotestreamadded,this.pcClient_.onsignalingstatechange=this.onsignalingstatechange,this.pcClient_.oniceconnectionstatechange=this.oniceconnectionstatechange,this.pcClient_.onnewicecandidate=this.onnewicecandidate,this.pcClient_.onerror=this.onerror,this.pcClient_.onpeerclientstats=this.onpeerclientstats,h.trace("Created PeerConnectionClient","Call.createPcClient_")},i.prototype.startSignaling_=function(){h.trace("Starting signaling.","Call.startSignaling_"),this.isInitiator()&&this.oncallerstarted&&this.oncallerstarted(this.params_.roomId,this.params_.roomLink),this.startTime=window.performance.now(),this.maybeCreatePcClientAsync_().then(function(){this.params_.isInitiator?this.pcClient_.startAsCaller(this.params_.offerOptions):this.pcClient_.startAsCallee(this.params_.messages)}.bind(this)).catch(function(t){this.onError_("Create PeerConnection exception: "+t)}.bind(this))},i.prototype.joinRoom_=function(){return new Promise(function(n,o){this.params_.roomId||o(Error("Missing room id."));var t=this.roomServer_+"/join/"+this.params_.roomId+window.location.search;h.sendAsyncUrlRequest("POST",t).then(function(t){var e=h.parseJSON(t);if(e){if("SUCCESS"!==e.result)return o(Error("Registration error: "+e.result)),void("FULL"===e.result&&(console.log("mg ,  room is FULL "),o(Error("room is FULL "))));h.trace("Joined the room.","Call.joinRoom_"),n(e.params)}else o(Error("Error parsing response JSON."))}.bind(this)).catch(function(t){o(Error("Failed to join the room: "+t.message))}.bind(this))}.bind(this))},i.prototype.onRecvSignalingChannelMessage_=function(t){this.maybeCreatePcClientAsync_().then(this.pcClient_.receiveSignalingMessage(t))},i.prototype.sendSignalingMessage_=function(t){var e=JSON.stringify(t);if(this.params_.isInitiator){var n=this.roomServer_+"/message/"+this.params_.roomId+"/"+this.params_.clientId+window.location.search,o=new XMLHttpRequest;o.open("POST",n,!0),o.send(e),h.trace(JSON.parse(e),"Call.sendSignalingMessage_ C->GAE ")}else this.channel_.send(e)},i.prototype.onError_=function(t){this.onerror&&this.onerror(t)};function A(t){this.loadingParams_={errorMessages:[],isLoopback:!1,warningMessages:[],offerOptions:{},peerConnectionConstraints:{},iceServerTransports:"",versionInfo:{name:"mg-0.0.6",branch:"master",time:"631750088000"},videoRecvCodec:"H264"},h.objAssign(this.loadingParams_,t),this.remoteVideo_=_("#"+this.loadingParams_.elementVideoId),this.remoteVideoResetTimer_=null,new Promise(function(t,e){this.loadingParams_.roomId?(this.createCall_(),this.finishCallSetup_(this.loadingParams_.roomId),t("finish")):e(Error("mg ,  AppWebRTC.main: roomId is null"))}.bind(this)).then(function(t){console.log(" mg ,  createCall_  "+t+". ")}).catch(function(t){h.trace("Error initializing: "+t.message,"AppWebRTC.main")}.bind(this))}var R={ERROR_APPCONTROLLER_BASE:200100,ERROR_APPCONTROLLER_CATCH:200101,ERROR_APPCONTROLLER_PARAM:200102,ERROR_APPCONTROLLER_SC:200103,ERROR_PAASAPI_BASE:200200,ERROR_PAASAPI_DATA_NULL:200201,ERROR_APPWEBRTC_BASE:200300,ERROR_APPWEBRTC_CALL_HANGUP:200301,ERROR_APPWEBRTC_CALL_TIMEOUT:200302};A.prototype.createCall_=function(){this.call_=new i(this.loadingParams_);var t=this.loadingParams_.errorMessages,e=this.loadingParams_.warningMessages;if(t&&0<t.length)for(var n=0;n<t.length;++n)console.log("mg , roomErrors:"+t[n]);else{if(e&&0<e.length)for(var o=0;o<e.length;++o)console.log("mg , roomWarnings:"+e[n]);this.call_.onremotehangup=this.onRemoteHangup_.bind(this),this.call_.onremotesdpset=this.onRemoteSdpSet_.bind(this),this.call_.onremotestreamadded=this.onRemoteStreamAdded_.bind(this),this.call_.onsignalingstatechange=this.onChangeCallBack_.bind(this),this.call_.oniceconnectionstatechange=this.onChangeCallBack_.bind(this),this.call_.onnewicecandidate=this.onChangeCallBack_.bind(this),this.call_.onerror=this.onDisplayError_.bind(this),this.call_.oncallerstarted=this.displaySharingInfo_.bind(this),this.call_.onpeerclientstats=this.onPeerClientStats_.bind(this)}},A.prototype.onChangeCallBack_=function(t,e){},A.prototype.onPeerClientStats_=function(t){this.onPeerClientStats&&this.onPeerClientStats(t)},A.prototype.onDisplayError_=function(t){this.onDisplayError(R.ERROR_APPWEBRTC_BASE,t)},A.prototype.setupUi_=function(){h.setUpFullScreen()},A.prototype.finishCallSetup_=function(t){this.call_.start(t),this.setupUi_()},A.prototype.hangup_=function(){console.log("mg , click hangup button "),this.transitionToDone_(),this.call_.hangup(!0)},A.prototype.onRemoteHangup_=function(){console.log("mg , call js callback Remote Hangup"),this.transitionToWaiting_(),this.call_.onRemoteHangup(),this.onDisplayError(R.ERROR_APPWEBRTC_CALL_HANGUP,"peer client callback Remote Hangup ")},A.prototype.onRemoteSdpSet_=function(t){t?(h.trace("Waiting for remote video.","onRemoteSdpSet_"),this.waitForRemoteVideo_()):(h.trace("No remote video stream; not waiting for media to arrive.","onRemoteSdpSet_"),this.transitionToActive_())},A.prototype.waitForRemoteVideo_=function(){2<=this.remoteVideo_.readyState?(h.trace("Remote video started; currentTime: "+this.remoteVideo_.currentTime,"waitForRemoteVideo_"),this.transitionToActive_()):this.remoteVideo_.oncanplay=this.waitForRemoteVideo_.bind(this)},A.prototype.onRemoteStreamAdded_=function(t){h.trace("Remote stream added.","onRemoteStreamAdded_"),this.remoteVideo_.srcObject=t,this.remoteVideoResetTimer_&&(clearTimeout(this.remoteVideoResetTimer_),this.remoteVideoResetTimer_=null)},A.prototype.transitionToActive_=function(){this.remoteVideo_.oncanplay=void 0;var t=(window.performance.now()-this.call_.startTime).toFixed(0);h.trace("Call setup time: "+t+"ms.","transitionToActive_"),this.activate_(this.remoteVideo_),this.onShowRemoteVideo&&this.onShowRemoteVideo(t)},A.prototype.transitionToWaiting_=function(){this.remoteVideo_.oncanplay=void 0,this.remoteVideoResetTimer_||(this.remoteVideoResetTimer_=setTimeout(function(){this.remoteVideoResetTimer_=null,h.trace("Resetting remoteVideo src after transitioning to waiting.","transitionToWaiting_"),this.remoteVideo_.srcObject=null}.bind(this),800)),this.deactivate_(this.remoteVideo_)},A.prototype.transitionToDone_=function(){this.remoteVideo_.oncanplay=void 0,this.deactivate_(this.remoteVideo_)},A.prototype.displaySharingInfo_=function(t,e){},A.prototype.onDisplayError=function(t,e){h.trace(t+","+e,"AppWebRTC.onDisplayError")},A.prototype.toggleAudioMute_=function(){console.log("mg - toggleAudioMute_ - 点击AudioMute按钮 - 关闭声音")},A.prototype.toggleVideoMute_=function(){console.log("mg - toggleVideoMute_ - 点击VideoMute按钮 - 关闭视频")},A.prototype.toggleFullScreen_=function(){console.log("mg - toggleFullScreen_ - 点击全屏按钮")},A.prototype.hide_=function(t){t.classList.add("hidden")},A.prototype.show_=function(t){t.classList.remove("hidden")},A.prototype.activate_=function(t){t.classList.add("active")},A.prototype.deactivate_=function(t){t.classList.remove("active")},A.prototype.stop=function(){this.hangup_()};var r={getStr:function(){var o,i="";function e(t){var e=t.data,n=new Uint8Array(e);self.postMessage(n)}var n=.5,r=null;function s(){console.log("mgWebSocket,websock onConnection"),clearTimeout(r),r=null,o.send(i)}function a(t){console.log("mgWebSocket,websock onError:"+JSON.stringify(t))}function u(t){console.log("mgWebSocket,websock onDisconnection:"+JSON.stringify(t))}function p(){console.log("mgWebSocket,websock onClose"),self.postMessage("close"),self.close()}function d(t){return o=new WebSocket(t),clearTimeout(r),r=setTimeout(function(){o.readyState!==WebSocket.OPEN&&(console.log("mgWebSocket,websock handleConnecting: WebSocket connection timeout."),o.close())},1e3*n),o.binaryType="arraybuffer",o.onopen=s,o.onclose=p,o.onerror=a,o.onmessage=e,o.onDisconnection=u,1}self.onmessage=function(t){var e,n=t.data;switch(n.type){case"createWebSocket":d(n.value);break;case"webSocketClose":o.close();break;case"helloBuff":n.value&&(i=n.value);break;case"sendBuff":n.value&&(e=n.value,o&&1==o.readyState?o.send(e):console.log("mgWebSocket,websock sendMessage:socket disconnect"));break;default:console.log("mgWebSocket,websock onmessage: default ")}}}.toString()},O=O||{};O.TouchInfo=function(){this.bb=null,this.bb_pos=0},O.TouchInfo.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},O.TouchInfo.prototype.x=function(){return this.bb.readInt32(this.bb_pos)},O.TouchInfo.prototype.y=function(){return this.bb.readInt32(this.bb_pos+4)},O.TouchInfo.prototype.force=function(){return this.bb.readFloat32(this.bb_pos+8)},O.TouchInfo.createTouchInfo=function(t,e,n,o){return t.prep(4,12),t.writeFloat32(o),t.writeInt32(n),t.writeInt32(e),t.offset()},O.ShakeAndPlay=function(){this.bb=null,this.bb_pos=0},O.ShakeAndPlay.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},O.ShakeAndPlay.getRootAsShakeAndPlay=function(t,e){return(e||new O.ShakeAndPlay).__init(t.readInt32(t.position())+t.position(),t)},O.ShakeAndPlay.prototype.id=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null},O.ShakeAndPlay.prototype.token=function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null},O.ShakeAndPlay.prototype.server=function(t){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__string(this.bb_pos+e,t):null},O.ShakeAndPlay.prototype.app=function(t){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__string(this.bb_pos+e,t):null},O.ShakeAndPlay.prototype.type=function(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readInt32(this.bb_pos+t):0},O.ShakeAndPlay.prototype.videofmt=function(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.readInt32(this.bb_pos+t):1},O.ShakeAndPlay.prototype.mode=function(){var t=this.bb.__offset(this.bb_pos,16);return t?this.bb.readUint8(this.bb_pos+t):0},O.ShakeAndPlay.prototype.bitrate=function(){var t=this.bb.__offset(this.bb_pos,18);return t?this.bb.readUint32(this.bb_pos+t):5242880},O.ShakeAndPlay.prototype.fps=function(){var t=this.bb.__offset(this.bb_pos,20);return t?this.bb.readUint32(this.bb_pos+t):30},O.ShakeAndPlay.prototype.maxiframe=function(){var t=this.bb.__offset(this.bb_pos,22);return t?this.bb.readUint32(this.bb_pos+t):100},O.ShakeAndPlay.prototype.level=function(){var t=this.bb.__offset(this.bb_pos,24);return t?this.bb.readInt32(this.bb_pos+t):2},O.ShakeAndPlay.prototype.width=function(){var t=this.bb.__offset(this.bb_pos,26);return t?this.bb.readUint16(this.bb_pos+t):480},O.ShakeAndPlay.prototype.height=function(){var t=this.bb.__offset(this.bb_pos,28);return t?this.bb.readUint16(this.bb_pos+t):800},O.ShakeAndPlay.prototype.audio=function(){var t=this.bb.__offset(this.bb_pos,30);return!t||!!this.bb.readInt8(this.bb_pos+t)},O.ShakeAndPlay.prototype.video=function(){var t=this.bb.__offset(this.bb_pos,32);return!t||!!this.bb.readInt8(this.bb_pos+t)},O.ShakeAndPlay.prototype.subtitle=function(){var t=this.bb.__offset(this.bb_pos,34);return!!t&&!!this.bb.readInt8(this.bb_pos+t)},O.ShakeAndPlay.startShakeAndPlay=function(t){t.startObject(16)},O.ShakeAndPlay.addId=function(t,e){t.addFieldOffset(0,e,0)},O.ShakeAndPlay.addToken=function(t,e){t.addFieldOffset(1,e,0)},O.ShakeAndPlay.addServer=function(t,e){t.addFieldOffset(2,e,0)},O.ShakeAndPlay.addApp=function(t,e){t.addFieldOffset(3,e,0)},O.ShakeAndPlay.addType=function(t,e){t.addFieldInt32(4,e,0)},O.ShakeAndPlay.addVideofmt=function(t,e){t.addFieldInt32(5,e,1)},O.ShakeAndPlay.addMode=function(t,e){t.addFieldInt8(6,e,0)},O.ShakeAndPlay.addBitrate=function(t,e){t.addFieldInt32(7,e,5242880)},O.ShakeAndPlay.addFps=function(t,e){t.addFieldInt32(8,e,30)},O.ShakeAndPlay.addMaxiframe=function(t,e){t.addFieldInt32(9,e,100)},O.ShakeAndPlay.addLevel=function(t,e){t.addFieldInt32(10,e,2)},O.ShakeAndPlay.addWidth=function(t,e){t.addFieldInt16(11,e,480)},O.ShakeAndPlay.addHeight=function(t,e){t.addFieldInt16(12,e,800)},O.ShakeAndPlay.addAudio=function(t,e){t.addFieldInt8(13,+e,1)},O.ShakeAndPlay.addVideo=function(t,e){t.addFieldInt8(14,+e,1)},O.ShakeAndPlay.addSubtitle=function(t,e){t.addFieldInt8(15,+e,0)},O.ShakeAndPlay.endShakeAndPlay=function(t){return t.endObject()},O.ShakeAndPlayR=function(){this.bb=null,this.bb_pos=0},O.ShakeAndPlayR.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},O.ShakeAndPlayR.getRootAsShakeAndPlayR=function(t,e){return(e||new O.ShakeAndPlayR).__init(t.readInt32(t.position())+t.position(),t)},O.ShakeAndPlayR.prototype.code=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0},O.ShakeAndPlayR.prototype.msg=function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null},O.ShakeAndPlayR.prototype.id=function(t){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__string(this.bb_pos+e,t):null},O.ShakeAndPlayR.prototype.token=function(t){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__string(this.bb_pos+e,t):null},O.ShakeAndPlayR.prototype.server=function(t){var e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__string(this.bb_pos+e,t):null},O.ShakeAndPlayR.prototype.app=function(t){var e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__string(this.bb_pos+e,t):null},O.ShakeAndPlayR.prototype.type=function(){var t=this.bb.__offset(this.bb_pos,16);return t?this.bb.readInt32(this.bb_pos+t):0},O.ShakeAndPlayR.startShakeAndPlayR=function(t){t.startObject(7)},O.ShakeAndPlayR.addCode=function(t,e){t.addFieldInt32(0,e,0)},O.ShakeAndPlayR.addMsg=function(t,e){t.addFieldOffset(1,e,0)},O.ShakeAndPlayR.addId=function(t,e){t.addFieldOffset(2,e,0)},O.ShakeAndPlayR.addToken=function(t,e){t.addFieldOffset(3,e,0)},O.ShakeAndPlayR.addServer=function(t,e){t.addFieldOffset(4,e,0)},O.ShakeAndPlayR.addApp=function(t,e){t.addFieldOffset(5,e,0)},O.ShakeAndPlayR.addType=function(t,e){t.addFieldInt32(6,e,0)},O.ShakeAndPlayR.endShakeAndPlayR=function(t){return t.endObject()},O.ShakeOnline=function(){this.bb=null,this.bb_pos=0},O.ShakeOnline.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},O.ShakeOnline.getRootAsShakeOnline=function(t,e){return(e||new O.ShakeOnline).__init(t.readInt32(t.position())+t.position(),t)},O.ShakeOnline.prototype.id=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null},O.ShakeOnline.prototype.token=function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null},O.ShakeOnline.prototype.server=function(t){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__string(this.bb_pos+e,t):null},O.ShakeOnline.prototype.app=function(t){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__string(this.bb_pos+e,t):null},O.ShakeOnline.prototype.type=function(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readInt32(this.bb_pos+t):0},O.ShakeOnline.startShakeOnline=function(t){t.startObject(5)},O.ShakeOnline.addId=function(t,e){t.addFieldOffset(0,e,0)},O.ShakeOnline.addToken=function(t,e){t.addFieldOffset(1,e,0)},O.ShakeOnline.addServer=function(t,e){t.addFieldOffset(2,e,0)},O.ShakeOnline.addApp=function(t,e){t.addFieldOffset(3,e,0)},O.ShakeOnline.addType=function(t,e){t.addFieldInt32(4,e,0)},O.ShakeOnline.endShakeOnline=function(t){return t.endObject()},O.ShakeOnlineR=function(){this.bb=null,this.bb_pos=0},O.ShakeOnlineR.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},O.ShakeOnlineR.getRootAsShakeOnlineR=function(t,e){return(e||new O.ShakeOnlineR).__init(t.readInt32(t.position())+t.position(),t)},O.ShakeOnlineR.prototype.code=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0},O.ShakeOnlineR.prototype.msg=function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null},O.ShakeOnlineR.prototype.id=function(t){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__string(this.bb_pos+e,t):null},O.ShakeOnlineR.prototype.token=function(t){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__string(this.bb_pos+e,t):null},O.ShakeOnlineR.prototype.server=function(t){var e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__string(this.bb_pos+e,t):null},O.ShakeOnlineR.prototype.app=function(t){var e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__string(this.bb_pos+e,t):null},O.ShakeOnlineR.prototype.type=function(){var t=this.bb.__offset(this.bb_pos,16);return t?this.bb.readInt32(this.bb_pos+t):0},O.ShakeOnlineR.startShakeOnlineR=function(t){t.startObject(7)},O.ShakeOnlineR.addCode=function(t,e){t.addFieldInt32(0,e,0)},O.ShakeOnlineR.addMsg=function(t,e){t.addFieldOffset(1,e,0)},O.ShakeOnlineR.addId=function(t,e){t.addFieldOffset(2,e,0)},O.ShakeOnlineR.addToken=function(t,e){t.addFieldOffset(3,e,0)},O.ShakeOnlineR.addServer=function(t,e){t.addFieldOffset(4,e,0)},O.ShakeOnlineR.addApp=function(t,e){t.addFieldOffset(5,e,0)},O.ShakeOnlineR.addType=function(t,e){t.addFieldInt32(6,e,0)},O.ShakeOnlineR.endShakeOnlineR=function(t){return t.endObject()},O.ShakeOffline=function(){this.bb=null,this.bb_pos=0},O.ShakeOffline.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},O.ShakeOffline.getRootAsShakeOffline=function(t,e){return(e||new O.ShakeOffline).__init(t.readInt32(t.position())+t.position(),t)},O.ShakeOffline.prototype.code=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0},O.ShakeOffline.prototype.msg=function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null},O.ShakeOffline.startShakeOffline=function(t){t.startObject(2)},O.ShakeOffline.addCode=function(t,e){t.addFieldInt32(0,e,0)},O.ShakeOffline.addMsg=function(t,e){t.addFieldOffset(1,e,0)},O.ShakeOffline.endShakeOffline=function(t){return t.endObject()},O.ShakeOfflineR=function(){this.bb=null,this.bb_pos=0},O.ShakeOfflineR.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},O.ShakeOfflineR.getRootAsShakeOfflineR=function(t,e){return(e||new O.ShakeOfflineR).__init(t.readInt32(t.position())+t.position(),t)},O.ShakeOfflineR.prototype.code=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0},O.ShakeOfflineR.prototype.msg=function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null},O.ShakeOfflineR.startShakeOfflineR=function(t){t.startObject(2)},O.ShakeOfflineR.addCode=function(t,e){t.addFieldInt32(0,e,0)},O.ShakeOfflineR.addMsg=function(t,e){t.addFieldOffset(1,e,0)},O.ShakeOfflineR.endShakeOfflineR=function(t){return t.endObject()},O.ShakeKick=function(){this.bb=null,this.bb_pos=0},O.ShakeKick.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},O.ShakeKick.getRootAsShakeKick=function(t,e){return(e||new O.ShakeKick).__init(t.readInt32(t.position())+t.position(),t)},O.ShakeKick.prototype.code=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0},O.ShakeKick.prototype.msg=function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null},O.ShakeKick.startShakeKick=function(t){t.startObject(2)},O.ShakeKick.addCode=function(t,e){t.addFieldInt32(0,e,0)},O.ShakeKick.addMsg=function(t,e){t.addFieldOffset(1,e,0)},O.ShakeKick.endShakeKick=function(t){return t.endObject()},O.ShakeKickR=function(){this.bb=null,this.bb_pos=0},O.ShakeKickR.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},O.ShakeKickR.getRootAsShakeKickR=function(t,e){return(e||new O.ShakeKickR).__init(t.readInt32(t.position())+t.position(),t)},O.ShakeKickR.prototype.code=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0},O.ShakeKickR.prototype.msg=function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null},O.ShakeKickR.startShakeKickR=function(t){t.startObject(2)},O.ShakeKickR.addCode=function(t,e){t.addFieldInt32(0,e,0)},O.ShakeKickR.addMsg=function(t,e){t.addFieldOffset(1,e,0)},O.ShakeKickR.endShakeKickR=function(t){return t.endObject()},O.ControlMtu=function(){this.bb=null,this.bb_pos=0},O.ControlMtu.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},O.ControlMtu.getRootAsControlMtu=function(t,e){return(e||new O.ControlMtu).__init(t.readInt32(t.position())+t.position(),t)},O.ControlMtu.prototype.seg=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt8(this.bb.__vector(this.bb_pos+e)+t):0},O.ControlMtu.prototype.segLength=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0},O.ControlMtu.prototype.segArray=function(){var t=this.bb.__offset(this.bb_pos,4);return t?new Int8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null},O.ControlMtu.startControlMtu=function(t){t.startObject(1)},O.ControlMtu.addSeg=function(t,e){t.addFieldOffset(0,e,0)},O.ControlMtu.createSegVector=function(t,e){t.startVector(1,e.length,1);for(var n=e.length-1;0<=n;n--)t.addInt8(e[n]);return t.endVector()},O.ControlMtu.startSegVector=function(t,e){t.startVector(1,e,1)},O.ControlMtu.endControlMtu=function(t){return t.endObject()},O.ControlMtuR=function(){this.bb=null,this.bb_pos=0},O.ControlMtuR.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},O.ControlMtuR.getRootAsControlMtuR=function(t,e){return(e||new O.ControlMtuR).__init(t.readInt32(t.position())+t.position(),t)},O.ControlMtuR.prototype.seg=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt8(this.bb.__vector(this.bb_pos+e)+t):0},O.ControlMtuR.prototype.segLength=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0},O.ControlMtuR.prototype.segArray=function(){var t=this.bb.__offset(this.bb_pos,4);return t?new Int8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null},O.ControlMtuR.startControlMtuR=function(t){t.startObject(1)},O.ControlMtuR.addSeg=function(t,e){t.addFieldOffset(0,e,0)},O.ControlMtuR.createSegVector=function(t,e){t.startVector(1,e.length,1);for(var n=e.length-1;0<=n;n--)t.addInt8(e[n]);return t.endVector()},O.ControlMtuR.startSegVector=function(t,e){t.startVector(1,e,1)},O.ControlMtuR.endControlMtuR=function(t){return t.endObject()},O.ControlDelay=function(){this.bb=null,this.bb_pos=0},O.ControlDelay.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},O.ControlDelay.getRootAsControlDelay=function(t,e){return(e||new O.ControlDelay).__init(t.readInt32(t.position())+t.position(),t)},O.ControlDelay.prototype.time=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null},O.ControlDelay.prototype.data=function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt8(this.bb.__vector(this.bb_pos+e)+t):0},O.ControlDelay.prototype.dataLength=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0},O.ControlDelay.prototype.dataArray=function(){var t=this.bb.__offset(this.bb_pos,6);return t?new Int8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null},O.ControlDelay.startControlDelay=function(t){t.startObject(2)},O.ControlDelay.addTime=function(t,e){t.addFieldOffset(0,e,0)},O.ControlDelay.addData=function(t,e){t.addFieldOffset(1,e,0)},O.ControlDelay.createDataVector=function(t,e){t.startVector(1,e.length,1);for(var n=e.length-1;0<=n;n--)t.addInt8(e[n]);return t.endVector()},O.ControlDelay.startDataVector=function(t,e){t.startVector(1,e,1)},O.ControlDelay.endControlDelay=function(t){return t.endObject()},O.ControlDelayR=function(){this.bb=null,this.bb_pos=0},O.ControlDelayR.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},O.ControlDelayR.getRootAsControlDelayR=function(t,e){return(e||new O.ControlDelayR).__init(t.readInt32(t.position())+t.position(),t)},O.ControlDelayR.prototype.time=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null},O.ControlDelayR.prototype.data=function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt8(this.bb.__vector(this.bb_pos+e)+t):0},O.ControlDelayR.prototype.dataLength=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0},O.ControlDelayR.prototype.dataArray=function(){var t=this.bb.__offset(this.bb_pos,6);return t?new Int8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null},O.ControlDelayR.startControlDelayR=function(t){t.startObject(2)},O.ControlDelayR.addTime=function(t,e){t.addFieldOffset(0,e,0)},O.ControlDelayR.addData=function(t,e){t.addFieldOffset(1,e,0)},O.ControlDelayR.createDataVector=function(t,e){t.startVector(1,e.length,1);for(var n=e.length-1;0<=n;n--)t.addInt8(e[n]);return t.endVector()},O.ControlDelayR.startDataVector=function(t,e){t.startVector(1,e,1)},O.ControlDelayR.endControlDelayR=function(t){return t.endObject()},O.ControlApp=function(){this.bb=null,this.bb_pos=0},O.ControlApp.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},O.ControlApp.getRootAsControlApp=function(t,e){return(e||new O.ControlApp).__init(t.readInt32(t.position())+t.position(),t)},O.ControlApp.prototype.app=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null},O.ControlApp.prototype.activity=function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null},O.ControlApp.prototype.videoUrl=function(t){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__string(this.bb_pos+e,t):null},O.ControlApp.prototype.playType=function(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt32(this.bb_pos+t):0},O.ControlApp.prototype.paramsType=function(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readInt32(this.bb_pos+t):0},O.ControlApp.startControlApp=function(t){t.startObject(5)},O.ControlApp.addApp=function(t,e){t.addFieldOffset(0,e,0)},O.ControlApp.addActivity=function(t,e){t.addFieldOffset(1,e,0)},O.ControlApp.addVideoUrl=function(t,e){t.addFieldOffset(2,e,0)},O.ControlApp.addPlayType=function(t,e){t.addFieldInt32(3,e,0)},O.ControlApp.addParamsType=function(t,e){t.addFieldInt32(4,e,0)},O.ControlApp.endControlApp=function(t){return t.endObject()},O.ControlAppR=function(){this.bb=null,this.bb_pos=0},O.ControlAppR.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},O.ControlAppR.getRootAsControlAppR=function(t,e){return(e||new O.ControlAppR).__init(t.readInt32(t.position())+t.position(),t)},O.ControlAppR.prototype.code=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0},O.ControlAppR.prototype.msg=function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null},O.ControlAppR.prototype.app=function(t){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__string(this.bb_pos+e,t):null},O.ControlAppR.startControlAppR=function(t){t.startObject(3)},O.ControlAppR.addCode=function(t,e){t.addFieldInt32(0,e,0)},O.ControlAppR.addMsg=function(t,e){t.addFieldOffset(1,e,0)},O.ControlAppR.addApp=function(t,e){t.addFieldOffset(2,e,0)},O.ControlAppR.endControlAppR=function(t){return t.endObject()},O.ControlKillApp=function(){this.bb=null,this.bb_pos=0},O.ControlKillApp.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},O.ControlKillApp.getRootAsControlKillApp=function(t,e){return(e||new O.ControlKillApp).__init(t.readInt32(t.position())+t.position(),t)},O.ControlKillApp.prototype.app=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null},O.ControlKillApp.startControlKillApp=function(t){t.startObject(1)},O.ControlKillApp.addApp=function(t,e){t.addFieldOffset(0,e,0)},O.ControlKillApp.endControlKillApp=function(t){return t.endObject()},O.ControlKillAppR=function(){this.bb=null,this.bb_pos=0},O.ControlKillAppR.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},O.ControlKillAppR.getRootAsControlKillAppR=function(t,e){return(e||new O.ControlKillAppR).__init(t.readInt32(t.position())+t.position(),t)},O.ControlKillAppR.prototype.code=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0},O.ControlKillAppR.prototype.msg=function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null},O.ControlKillAppR.prototype.app=function(t){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__string(this.bb_pos+e,t):null},O.ControlKillAppR.startControlKillAppR=function(t){t.startObject(3)},O.ControlKillAppR.addCode=function(t,e){t.addFieldInt32(0,e,0)},O.ControlKillAppR.addMsg=function(t,e){t.addFieldOffset(1,e,0)},O.ControlKillAppR.addApp=function(t,e){t.addFieldOffset(2,e,0)},O.ControlKillAppR.endControlKillAppR=function(t){return t.endObject()},O.ControlQueryAuth=function(){this.bb=null,this.bb_pos=0},O.ControlQueryAuth.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},O.ControlQueryAuth.getRootAsControlQueryAuth=function(t,e){return(e||new O.ControlQueryAuth).__init(t.readInt32(t.position())+t.position(),t)},O.ControlQueryAuth.prototype.queryauthority=function(){var t=this.bb.__offset(this.bb_pos,4);return!!t&&!!this.bb.readInt8(this.bb_pos+t)},O.ControlQueryAuth.startControlQueryAuth=function(t){t.startObject(1)},O.ControlQueryAuth.addQueryauthority=function(t,e){t.addFieldInt8(0,+e,0)},O.ControlQueryAuth.endControlQueryAuth=function(t){return t.endObject()},O.ControlQueryAuthR=function(){this.bb=null,this.bb_pos=0},O.ControlQueryAuthR.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},O.ControlQueryAuthR.getRootAsControlQueryAuthR=function(t,e){return(e||new O.ControlQueryAuthR).__init(t.readInt32(t.position())+t.position(),t)},O.ControlQueryAuthR.prototype.hasauthority=function(){var t=this.bb.__offset(this.bb_pos,4);return!!t&&!!this.bb.readInt8(this.bb_pos+t)},O.ControlQueryAuthR.startControlQueryAuthR=function(t){t.startObject(1)},O.ControlQueryAuthR.addHasauthority=function(t,e){t.addFieldInt8(0,+e,0)},O.ControlQueryAuthR.endControlQueryAuthR=function(t){return t.endObject()},O.ControlAVFmt=function(){this.bb=null,this.bb_pos=0},O.ControlAVFmt.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},O.ControlAVFmt.getRootAsControlAVFmt=function(t,e){return(e||new O.ControlAVFmt).__init(t.readInt32(t.position())+t.position(),t)},O.ControlAVFmt.prototype.afmt=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readUint8(this.bb_pos+t):0},O.ControlAVFmt.prototype.aprofile=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):0},O.ControlAVFmt.prototype.achannel=function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):2},O.ControlAVFmt.prototype.asmprate=function(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readUint16(this.bb_pos+t):44100},O.ControlAVFmt.prototype.abitrate=function(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readUint32(this.bb_pos+t):131072},O.ControlAVFmt.prototype.vfmt=function(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.readUint8(this.bb_pos+t):0},O.ControlAVFmt.prototype.vprofile=function(){var t=this.bb.__offset(this.bb_pos,16);return t?this.bb.readUint8(this.bb_pos+t):0},O.ControlAVFmt.prototype.vwidth=function(){var t=this.bb.__offset(this.bb_pos,18);return t?this.bb.readUint16(this.bb_pos+t):1024},O.ControlAVFmt.prototype.vheight=function(){var t=this.bb.__offset(this.bb_pos,20);return t?this.bb.readUint16(this.bb_pos+t):576},O.ControlAVFmt.prototype.vfps=function(){var t=this.bb.__offset(this.bb_pos,22);return t?this.bb.readUint16(this.bb_pos+t):30},O.ControlAVFmt.prototype.vbitrate=function(){var t=this.bb.__offset(this.bb_pos,24);return t?this.bb.readUint32(this.bb_pos+t):5242880},O.ControlAVFmt.startControlAVFmt=function(t){t.startObject(11)},O.ControlAVFmt.addAfmt=function(t,e){t.addFieldInt8(0,e,0)},O.ControlAVFmt.addAprofile=function(t,e){t.addFieldInt8(1,e,0)},O.ControlAVFmt.addAchannel=function(t,e){t.addFieldInt8(2,e,2)},O.ControlAVFmt.addAsmprate=function(t,e){t.addFieldInt16(3,e,44100)},O.ControlAVFmt.addAbitrate=function(t,e){t.addFieldInt32(4,e,131072)},O.ControlAVFmt.addVfmt=function(t,e){t.addFieldInt8(5,e,0)},O.ControlAVFmt.addVprofile=function(t,e){t.addFieldInt8(6,e,0)},O.ControlAVFmt.addVwidth=function(t,e){t.addFieldInt16(7,e,1024)},O.ControlAVFmt.addVheight=function(t,e){t.addFieldInt16(8,e,576)},O.ControlAVFmt.addVfps=function(t,e){t.addFieldInt16(9,e,30)},O.ControlAVFmt.addVbitrate=function(t,e){t.addFieldInt32(10,e,5242880)},O.ControlAVFmt.endControlAVFmt=function(t){return t.endObject()},O.ControlAVFmtR=function(){this.bb=null,this.bb_pos=0},O.ControlAVFmtR.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},O.ControlAVFmtR.getRootAsControlAVFmtR=function(t,e){return(e||new O.ControlAVFmtR).__init(t.readInt32(t.position())+t.position(),t)},O.ControlAVFmtR.prototype.code=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0},O.ControlAVFmtR.prototype.msg=function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null},O.ControlAVFmtR.prototype.afmt=function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):0},O.ControlAVFmtR.prototype.aprofile=function(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readUint8(this.bb_pos+t):0},O.ControlAVFmtR.prototype.achannel=function(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readUint8(this.bb_pos+t):2},O.ControlAVFmtR.prototype.asmprate=function(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.readUint32(this.bb_pos+t):44100},O.ControlAVFmtR.prototype.abitrate=function(){var t=this.bb.__offset(this.bb_pos,16);return t?this.bb.readUint32(this.bb_pos+t):131072},O.ControlAVFmtR.prototype.vfmt=function(){var t=this.bb.__offset(this.bb_pos,18);return t?this.bb.readUint8(this.bb_pos+t):0},O.ControlAVFmtR.prototype.vprofile=function(){var t=this.bb.__offset(this.bb_pos,20);return t?this.bb.readUint8(this.bb_pos+t):0},O.ControlAVFmtR.prototype.vwidth=function(){var t=this.bb.__offset(this.bb_pos,22);return t?this.bb.readUint16(this.bb_pos+t):1024},O.ControlAVFmtR.prototype.vheight=function(){var t=this.bb.__offset(this.bb_pos,24);return t?this.bb.readUint16(this.bb_pos+t):576},O.ControlAVFmtR.prototype.vfps=function(){var t=this.bb.__offset(this.bb_pos,26);return t?this.bb.readUint16(this.bb_pos+t):30},O.ControlAVFmtR.prototype.vbitrate=function(){var t=this.bb.__offset(this.bb_pos,28);return t?this.bb.readUint32(this.bb_pos+t):5242880},O.ControlAVFmtR.startControlAVFmtR=function(t){t.startObject(13)},O.ControlAVFmtR.addCode=function(t,e){t.addFieldInt32(0,e,0)},O.ControlAVFmtR.addMsg=function(t,e){t.addFieldOffset(1,e,0)},O.ControlAVFmtR.addAfmt=function(t,e){t.addFieldInt8(2,e,0)},O.ControlAVFmtR.addAprofile=function(t,e){t.addFieldInt8(3,e,0)},O.ControlAVFmtR.addAchannel=function(t,e){t.addFieldInt8(4,e,2)},O.ControlAVFmtR.addAsmprate=function(t,e){t.addFieldInt32(5,e,44100)},O.ControlAVFmtR.addAbitrate=function(t,e){t.addFieldInt32(6,e,131072)},O.ControlAVFmtR.addVfmt=function(t,e){t.addFieldInt8(7,e,0)},O.ControlAVFmtR.addVprofile=function(t,e){t.addFieldInt8(8,e,0)},O.ControlAVFmtR.addVwidth=function(t,e){t.addFieldInt16(9,e,1024)},O.ControlAVFmtR.addVheight=function(t,e){t.addFieldInt16(10,e,576)},O.ControlAVFmtR.addVfps=function(t,e){t.addFieldInt16(11,e,30)},O.ControlAVFmtR.addVbitrate=function(t,e){t.addFieldInt32(12,e,5242880)},O.ControlAVFmtR.endControlAVFmtR=function(t){return t.endObject()},O.ControlAVTrans=function(){this.bb=null,this.bb_pos=0},O.ControlAVTrans.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},O.ControlAVTrans.getRootAsControlAVTrans=function(t,e){return(e||new O.ControlAVTrans).__init(t.readInt32(t.position())+t.position(),t)},O.ControlAVTrans.prototype.audio=function(){var t=this.bb.__offset(this.bb_pos,4);return!t||!!this.bb.readInt8(this.bb_pos+t)},O.ControlAVTrans.prototype.video=function(){var t=this.bb.__offset(this.bb_pos,6);return!t||!!this.bb.readInt8(this.bb_pos+t)},O.ControlAVTrans.prototype.subtitle=function(){var t=this.bb.__offset(this.bb_pos,8);return!!t&&!!this.bb.readInt8(this.bb_pos+t)},O.ControlAVTrans.startControlAVTrans=function(t){t.startObject(3)},O.ControlAVTrans.addAudio=function(t,e){t.addFieldInt8(0,+e,1)},O.ControlAVTrans.addVideo=function(t,e){t.addFieldInt8(1,+e,1)},O.ControlAVTrans.addSubtitle=function(t,e){t.addFieldInt8(2,+e,0)},O.ControlAVTrans.endControlAVTrans=function(t){return t.endObject()},O.ControlAVTransR=function(){this.bb=null,this.bb_pos=0},O.ControlAVTransR.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},O.ControlAVTransR.getRootAsControlAVTransR=function(t,e){return(e||new O.ControlAVTransR).__init(t.readInt32(t.position())+t.position(),t)},O.ControlAVTransR.prototype.code=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0},O.ControlAVTransR.prototype.msg=function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null},O.ControlAVTransR.prototype.audio=function(){var t=this.bb.__offset(this.bb_pos,8);return!t||!!this.bb.readInt8(this.bb_pos+t)},O.ControlAVTransR.prototype.video=function(){var t=this.bb.__offset(this.bb_pos,10);return!t||!!this.bb.readInt8(this.bb_pos+t)},O.ControlAVTransR.prototype.subtitle=function(){var t=this.bb.__offset(this.bb_pos,12);return!!t&&!!this.bb.readInt8(this.bb_pos+t)},O.ControlAVTransR.startControlAVTransR=function(t){t.startObject(5)},O.ControlAVTransR.addCode=function(t,e){t.addFieldInt32(0,e,0)},O.ControlAVTransR.addMsg=function(t,e){t.addFieldOffset(1,e,0)},O.ControlAVTransR.addAudio=function(t,e){t.addFieldInt8(2,+e,1)},O.ControlAVTransR.addVideo=function(t,e){t.addFieldInt8(3,+e,1)},O.ControlAVTransR.addSubtitle=function(t,e){t.addFieldInt8(4,+e,0)},O.ControlAVTransR.endControlAVTransR=function(t){return t.endObject()},O.ControlIFrame=function(){this.bb=null,this.bb_pos=0},O.ControlIFrame.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},O.ControlIFrame.getRootAsControlIFrame=function(t,e){return(e||new O.ControlIFrame).__init(t.readInt32(t.position())+t.position(),t)},O.ControlIFrame.prototype.reserved=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):0},O.ControlIFrame.startControlIFrame=function(t){t.startObject(1)},O.ControlIFrame.addReserved=function(t,e){t.addFieldInt8(0,e,0)},O.ControlIFrame.endControlIFrame=function(t){return t.endObject()},O.ControlAudio=function(){this.bb=null,this.bb_pos=0},O.ControlAudio.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},O.ControlAudio.getRootAsControlAudio=function(t,e){return(e||new O.ControlAudio).__init(t.readInt32(t.position())+t.position(),t)},O.ControlAudio.prototype.mode=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readUint8(this.bb_pos+t):0},O.ControlAudio.prototype.bitrate=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint32(this.bb_pos+t):131072},O.ControlAudio.startControlAudio=function(t){t.startObject(2)},O.ControlAudio.addMode=function(t,e){t.addFieldInt8(0,e,0)},O.ControlAudio.addBitrate=function(t,e){t.addFieldInt32(1,e,131072)},O.ControlAudio.endControlAudio=function(t){return t.endObject()},O.ControlAudioR=function(){this.bb=null,this.bb_pos=0},O.ControlAudioR.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},O.ControlAudioR.getRootAsControlAudioR=function(t,e){return(e||new O.ControlAudioR).__init(t.readInt32(t.position())+t.position(),t)},O.ControlAudioR.prototype.code=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0},O.ControlAudioR.prototype.msg=function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null},O.ControlAudioR.prototype.profile=function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):0},O.ControlAudioR.prototype.channel=function(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readUint8(this.bb_pos+t):2},O.ControlAudioR.prototype.smprate=function(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readUint32(this.bb_pos+t):44100},O.ControlAudioR.prototype.bitrate=function(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.readUint32(this.bb_pos+t):131072},O.ControlAudioR.startControlAudioR=function(t){t.startObject(6)},O.ControlAudioR.addCode=function(t,e){t.addFieldInt32(0,e,0)},O.ControlAudioR.addMsg=function(t,e){t.addFieldOffset(1,e,0)},O.ControlAudioR.addProfile=function(t,e){t.addFieldInt8(2,e,0)},O.ControlAudioR.addChannel=function(t,e){t.addFieldInt8(3,e,2)},O.ControlAudioR.addSmprate=function(t,e){t.addFieldInt32(4,e,44100)},O.ControlAudioR.addBitrate=function(t,e){t.addFieldInt32(5,e,131072)},O.ControlAudioR.endControlAudioR=function(t){return t.endObject()},O.ControlVideo=function(){this.bb=null,this.bb_pos=0},O.ControlVideo.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},O.ControlVideo.getRootAsControlVideo=function(t,e){return(e||new O.ControlVideo).__init(t.readInt32(t.position())+t.position(),t)},O.ControlVideo.prototype.mode=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readUint8(this.bb_pos+t):0},O.ControlVideo.prototype.bitrate=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint32(this.bb_pos+t):5242880},O.ControlVideo.prototype.fps=function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint32(this.bb_pos+t):30},O.ControlVideo.prototype.maxiframe=function(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readUint32(this.bb_pos+t):100},O.ControlVideo.startControlVideo=function(t){t.startObject(4)},O.ControlVideo.addMode=function(t,e){t.addFieldInt8(0,e,0)},O.ControlVideo.addBitrate=function(t,e){t.addFieldInt32(1,e,5242880)},O.ControlVideo.addFps=function(t,e){t.addFieldInt32(2,e,30)},O.ControlVideo.addMaxiframe=function(t,e){t.addFieldInt32(3,e,100)},O.ControlVideo.endControlVideo=function(t){return t.endObject()},O.ControlVideoR=function(){this.bb=null,this.bb_pos=0},O.ControlVideoR.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},O.ControlVideoR.getRootAsControlVideoR=function(t,e){return(e||new O.ControlVideoR).__init(t.readInt32(t.position())+t.position(),t)},O.ControlVideoR.prototype.code=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0},O.ControlVideoR.prototype.msg=function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null},O.ControlVideoR.prototype.profile=function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):0},O.ControlVideoR.prototype.width=function(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readUint16(this.bb_pos+t):1024},O.ControlVideoR.prototype.height=function(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readUint16(this.bb_pos+t):576},O.ControlVideoR.prototype.fps=function(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.readUint16(this.bb_pos+t):30},O.ControlVideoR.prototype.bitrate=function(){var t=this.bb.__offset(this.bb_pos,16);return t?this.bb.readUint32(this.bb_pos+t):5242880},O.ControlVideoR.prototype.bitmode=function(){var t=this.bb.__offset(this.bb_pos,18);return t?this.bb.readUint8(this.bb_pos+t):0},O.ControlVideoR.startControlVideoR=function(t){t.startObject(8)},O.ControlVideoR.addCode=function(t,e){t.addFieldInt32(0,e,0)},O.ControlVideoR.addMsg=function(t,e){t.addFieldOffset(1,e,0)},O.ControlVideoR.addProfile=function(t,e){t.addFieldInt8(2,e,0)},O.ControlVideoR.addWidth=function(t,e){t.addFieldInt16(3,e,1024)},O.ControlVideoR.addHeight=function(t,e){t.addFieldInt16(4,e,576)},O.ControlVideoR.addFps=function(t,e){t.addFieldInt16(5,e,30)},O.ControlVideoR.addBitrate=function(t,e){t.addFieldInt32(6,e,5242880)},O.ControlVideoR.addBitmode=function(t,e){t.addFieldInt8(7,e,0)},O.ControlVideoR.endControlVideoR=function(t){return t.endObject()},O.ControlScreen=function(){this.bb=null,this.bb_pos=0},O.ControlScreen.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},O.ControlScreen.getRootAsControlScreen=function(t,e){return(e||new O.ControlScreen).__init(t.readInt32(t.position())+t.position(),t)},O.ControlScreen.prototype.zoom=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readFloat32(this.bb_pos+t):0},O.ControlScreen.startControlScreen=function(t){t.startObject(1)},O.ControlScreen.addZoom=function(t,e){t.addFieldFloat32(0,e,0)},O.ControlScreen.endControlScreen=function(t){return t.endObject()},O.ControlTime=function(){this.bb=null,this.bb_pos=0},O.ControlTime.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},O.ControlTime.getRootAsControlTime=function(t,e){return(e||new O.ControlTime).__init(t.readInt32(t.position())+t.position(),t)},O.ControlTime.prototype.time=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0},O.ControlTime.startControlTime=function(t){t.startObject(1)},O.ControlTime.addTime=function(t,e){t.addFieldInt32(0,e,0)},O.ControlTime.endControlTime=function(t){return t.endObject()},O.InputString=function(){this.bb=null,this.bb_pos=0},O.InputString.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},O.InputString.getRootAsInputString=function(t,e){return(e||new O.InputString).__init(t.readInt32(t.position())+t.position(),t)},O.InputString.prototype.str=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null},O.InputString.startInputString=function(t){t.startObject(1)},O.InputString.addStr=function(t,e){t.addFieldOffset(0,e,0)},O.InputString.endInputString=function(t){return t.endObject()},O.InputGameController=function(){this.bb=null,this.bb_pos=0},O.InputGameController.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},O.InputGameController.getRootAsInputGameController=function(t,e){return(e||new O.InputGameController).__init(t.readInt32(t.position())+t.position(),t)},O.InputGameController.prototype.index=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readUint8(this.bb_pos+t):0},O.InputGameController.prototype.buttons=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint16(this.bb_pos+t):0},O.InputGameController.prototype.lt=function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):0},O.InputGameController.prototype.rt=function(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readUint8(this.bb_pos+t):0},O.InputGameController.prototype.lx=function(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readInt16(this.bb_pos+t):0},O.InputGameController.prototype.ly=function(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.readInt16(this.bb_pos+t):0},O.InputGameController.prototype.rx=function(){var t=this.bb.__offset(this.bb_pos,16);return t?this.bb.readInt16(this.bb_pos+t):0},O.InputGameController.prototype.ry=function(){var t=this.bb.__offset(this.bb_pos,18);return t?this.bb.readInt16(this.bb_pos+t):0},O.InputGameController.startInputGameController=function(t){t.startObject(8)},O.InputGameController.addIndex=function(t,e){t.addFieldInt8(0,e,0)},O.InputGameController.addButtons=function(t,e){t.addFieldInt16(1,e,0)},O.InputGameController.addLt=function(t,e){t.addFieldInt8(2,e,0)},O.InputGameController.addRt=function(t,e){t.addFieldInt8(3,e,0)},O.InputGameController.addLx=function(t,e){t.addFieldInt16(4,e,0)},O.InputGameController.addLy=function(t,e){t.addFieldInt16(5,e,0)},O.InputGameController.addRx=function(t,e){t.addFieldInt16(6,e,0)},O.InputGameController.addRy=function(t,e){t.addFieldInt16(7,e,0)},O.InputGameController.endInputGameController=function(t){return t.endObject()},O.InputKeyboard=function(){this.bb=null,this.bb_pos=0},O.InputKeyboard.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},O.InputKeyboard.getRootAsInputKeyboard=function(t,e){return(e||new O.InputKeyboard).__init(t.readInt32(t.position())+t.position(),t)},O.InputKeyboard.prototype.key=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readUint8(this.bb_pos+t):0},O.InputKeyboard.prototype.pressed=function(){var t=this.bb.__offset(this.bb_pos,6);return!!t&&!!this.bb.readInt8(this.bb_pos+t)},O.InputKeyboard.startInputKeyboard=function(t){t.startObject(2)},O.InputKeyboard.addKey=function(t,e){t.addFieldInt8(0,e,0)},O.InputKeyboard.addPressed=function(t,e){t.addFieldInt8(1,+e,0)},O.InputKeyboard.endInputKeyboard=function(t){return t.endObject()},O.InputMouseKey=function(){this.bb=null,this.bb_pos=0},O.InputMouseKey.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},O.InputMouseKey.getRootAsInputMouseKey=function(t,e){return(e||new O.InputMouseKey).__init(t.readInt32(t.position())+t.position(),t)},O.InputMouseKey.prototype.key=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readUint8(this.bb_pos+t):0},O.InputMouseKey.prototype.pressed=function(){var t=this.bb.__offset(this.bb_pos,6);return!!t&&!!this.bb.readInt8(this.bb_pos+t)},O.InputMouseKey.startInputMouseKey=function(t){t.startObject(2)},O.InputMouseKey.addKey=function(t,e){t.addFieldInt8(0,e,0)},O.InputMouseKey.addPressed=function(t,e){t.addFieldInt8(1,+e,0)},O.InputMouseKey.endInputMouseKey=function(t){return t.endObject()},O.InputMouseWheel=function(){this.bb=null,this.bb_pos=0},O.InputMouseWheel.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},O.InputMouseWheel.getRootAsInputMouseWheel=function(t,e){return(e||new O.InputMouseWheel).__init(t.readInt32(t.position())+t.position(),t)},O.InputMouseWheel.prototype.x=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):0},O.InputMouseWheel.prototype.y=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt16(this.bb_pos+t):0},O.InputMouseWheel.startInputMouseWheel=function(t){t.startObject(2)},O.InputMouseWheel.addX=function(t,e){t.addFieldInt16(0,e,0)},O.InputMouseWheel.addY=function(t,e){t.addFieldInt16(1,e,0)},O.InputMouseWheel.endInputMouseWheel=function(t){return t.endObject()},O.InputMouseMove=function(){this.bb=null,this.bb_pos=0},O.InputMouseMove.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},O.InputMouseMove.getRootAsInputMouseMove=function(t,e){return(e||new O.InputMouseMove).__init(t.readInt32(t.position())+t.position(),t)},O.InputMouseMove.prototype.x=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):0},O.InputMouseMove.prototype.y=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt16(this.bb_pos+t):0},O.InputMouseMove.startInputMouseMove=function(t){t.startObject(2)},O.InputMouseMove.addX=function(t,e){t.addFieldInt16(0,e,0)},O.InputMouseMove.addY=function(t,e){t.addFieldInt16(1,e,0)},O.InputMouseMove.endInputMouseMove=function(t){return t.endObject()},O.InputCursor=function(){this.bb=null,this.bb_pos=0},O.InputCursor.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},O.InputCursor.getRootAsInputCursor=function(t,e){return(e||new O.InputCursor).__init(t.readInt32(t.position())+t.position(),t)},O.InputCursor.prototype.x=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readFloat32(this.bb_pos+t):0},O.InputCursor.prototype.y=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readFloat32(this.bb_pos+t):0},O.InputCursor.startInputCursor=function(t){t.startObject(2)},O.InputCursor.addX=function(t,e){t.addFieldFloat32(0,e,0)},O.InputCursor.addY=function(t,e){t.addFieldFloat32(1,e,0)},O.InputCursor.endInputCursor=function(t){return t.endObject()},O.InputTouch=function(){this.bb=null,this.bb_pos=0},O.InputTouch.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},O.InputTouch.getRootAsInputTouch=function(t,e){return(e||new O.InputTouch).__init(t.readInt32(t.position())+t.position(),t)},O.InputTouch.prototype.index=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0},O.InputTouch.prototype.type=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):0},O.InputTouch.prototype.touch=function(t,e){var n=this.bb.__offset(this.bb_pos,8);return n?(e||new O.TouchInfo).__init(this.bb.__vector(this.bb_pos+n)+12*t,this.bb):null},O.InputTouch.prototype.touchLength=function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0},O.InputTouch.startInputTouch=function(t){t.startObject(3)},O.InputTouch.addIndex=function(t,e){t.addFieldInt32(0,e,0)},O.InputTouch.addType=function(t,e){t.addFieldInt8(1,e,0)},O.InputTouch.addTouch=function(t,e){t.addFieldOffset(2,e,0)},O.InputTouch.startTouchVector=function(t,e){t.startVector(12,e,4)},O.InputTouch.endInputTouch=function(t){return t.endObject()},O.InputLocation=function(){this.bb=null,this.bb_pos=0},O.InputLocation.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},O.InputLocation.getRootAsInputLocation=function(t,e){return(e||new O.InputLocation).__init(t.readInt32(t.position())+t.position(),t)},O.InputLocation.prototype.longitude=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readFloat32(this.bb_pos+t):0},O.InputLocation.prototype.latitude=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readFloat32(this.bb_pos+t):0},O.InputLocation.prototype.altitude=function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readFloat32(this.bb_pos+t):0},O.InputLocation.prototype.floor=function(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readFloat32(this.bb_pos+t):0},O.InputLocation.prototype.horizontalaccuracy=function(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readFloat32(this.bb_pos+t):0},O.InputLocation.prototype.verticalaccuracy=function(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.readFloat32(this.bb_pos+t):0},O.InputLocation.prototype.speed=function(){var t=this.bb.__offset(this.bb_pos,16);return t?this.bb.readFloat32(this.bb_pos+t):0},O.InputLocation.prototype.direction=function(){var t=this.bb.__offset(this.bb_pos,18);return t?this.bb.readFloat32(this.bb_pos+t):0},O.InputLocation.prototype.timestamp=function(t){var e=this.bb.__offset(this.bb_pos,20);return e?this.bb.__string(this.bb_pos+e,t):null},O.InputLocation.startInputLocation=function(t){t.startObject(9)},O.InputLocation.addLongitude=function(t,e){t.addFieldFloat32(0,e,0)},O.InputLocation.addLatitude=function(t,e){t.addFieldFloat32(1,e,0)},O.InputLocation.addAltitude=function(t,e){t.addFieldFloat32(2,e,0)},O.InputLocation.addFloor=function(t,e){t.addFieldFloat32(3,e,0)},O.InputLocation.addHorizontalaccuracy=function(t,e){t.addFieldFloat32(4,e,0)},O.InputLocation.addVerticalaccuracy=function(t,e){t.addFieldFloat32(5,e,0)},O.InputLocation.addSpeed=function(t,e){t.addFieldFloat32(6,e,0)},O.InputLocation.addDirection=function(t,e){t.addFieldFloat32(7,e,0)},O.InputLocation.addTimestamp=function(t,e){t.addFieldOffset(8,e,0)},O.InputLocation.endInputLocation=function(t){return t.endObject()},O.InputAccelerometer=function(){this.bb=null,this.bb_pos=0},O.InputAccelerometer.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},O.InputAccelerometer.getRootAsInputAccelerometer=function(t,e){return(e||new O.InputAccelerometer).__init(t.readInt32(t.position())+t.position(),t)},O.InputAccelerometer.prototype.x=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readFloat32(this.bb_pos+t):0},O.InputAccelerometer.prototype.y=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readFloat32(this.bb_pos+t):0},O.InputAccelerometer.prototype.z=function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readFloat32(this.bb_pos+t):0},O.InputAccelerometer.startInputAccelerometer=function(t){t.startObject(3)},O.InputAccelerometer.addX=function(t,e){t.addFieldFloat32(0,e,0)},O.InputAccelerometer.addY=function(t,e){t.addFieldFloat32(1,e,0)},O.InputAccelerometer.addZ=function(t,e){t.addFieldFloat32(2,e,0)},O.InputAccelerometer.endInputAccelerometer=function(t){return t.endObject()},O.InputAltimeter=function(){this.bb=null,this.bb_pos=0},O.InputAltimeter.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},O.InputAltimeter.getRootAsInputAltimeter=function(t,e){return(e||new O.InputAltimeter).__init(t.readInt32(t.position())+t.position(),t)},O.InputAltimeter.prototype.altitude=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readFloat32(this.bb_pos+t):0},O.InputAltimeter.prototype.pressure=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readFloat32(this.bb_pos+t):0},O.InputAltimeter.startInputAltimeter=function(t){t.startObject(2)},O.InputAltimeter.addAltitude=function(t,e){t.addFieldFloat32(0,e,0)},O.InputAltimeter.addPressure=function(t,e){t.addFieldFloat32(1,e,0)},O.InputAltimeter.endInputAltimeter=function(t){return t.endObject()},O.InputGyro=function(){this.bb=null,this.bb_pos=0},O.InputGyro.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},O.InputGyro.getRootAsInputGyro=function(t,e){return(e||new O.InputGyro).__init(t.readInt32(t.position())+t.position(),t)},O.InputGyro.prototype.x=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readFloat32(this.bb_pos+t):0},O.InputGyro.prototype.y=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readFloat32(this.bb_pos+t):0},O.InputGyro.prototype.z=function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readFloat32(this.bb_pos+t):0},O.InputGyro.startInputGyro=function(t){t.startObject(3)},O.InputGyro.addX=function(t,e){t.addFieldFloat32(0,e,0)},O.InputGyro.addY=function(t,e){t.addFieldFloat32(1,e,0)},O.InputGyro.addZ=function(t,e){t.addFieldFloat32(2,e,0)},O.InputGyro.endInputGyro=function(t){return t.endObject()},O.InputMagnetometer=function(){this.bb=null,this.bb_pos=0},O.InputMagnetometer.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},O.InputMagnetometer.getRootAsInputMagnetometer=function(t,e){return(e||new O.InputMagnetometer).__init(t.readInt32(t.position())+t.position(),t)},O.InputMagnetometer.prototype.x=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readFloat32(this.bb_pos+t):0},O.InputMagnetometer.prototype.y=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readFloat32(this.bb_pos+t):0},O.InputMagnetometer.prototype.z=function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readFloat32(this.bb_pos+t):0},O.InputMagnetometer.startInputMagnetometer=function(t){t.startObject(3)},O.InputMagnetometer.addX=function(t,e){t.addFieldFloat32(0,e,0)},O.InputMagnetometer.addY=function(t,e){t.addFieldFloat32(1,e,0)},O.InputMagnetometer.addZ=function(t,e){t.addFieldFloat32(2,e,0)},O.InputMagnetometer.endInputMagnetometer=function(t){return t.endObject()},O.InputPedometer=function(){this.bb=null,this.bb_pos=0},O.InputPedometer.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},O.InputPedometer.getRootAsInputPedometer=function(t,e){return(e||new O.InputPedometer).__init(t.readInt32(t.position())+t.position(),t)},O.InputPedometer.prototype.startdate=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null},O.InputPedometer.prototype.enddate=function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null},O.InputPedometer.prototype.steps=function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readFloat32(this.bb_pos+t):0},O.InputPedometer.prototype.distance=function(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readFloat32(this.bb_pos+t):0},O.InputPedometer.prototype.averageactivepace=function(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readFloat32(this.bb_pos+t):0},O.InputPedometer.prototype.currentpace=function(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.readFloat32(this.bb_pos+t):0},O.InputPedometer.prototype.currentcadence=function(){var t=this.bb.__offset(this.bb_pos,16);return t?this.bb.readFloat32(this.bb_pos+t):0},O.InputPedometer.prototype.floorsasc=function(){var t=this.bb.__offset(this.bb_pos,18);return t?this.bb.readFloat32(this.bb_pos+t):0},O.InputPedometer.prototype.floorsdes=function(){var t=this.bb.__offset(this.bb_pos,20);return t?this.bb.readFloat32(this.bb_pos+t):0},O.InputPedometer.startInputPedometer=function(t){t.startObject(9)},O.InputPedometer.addStartdate=function(t,e){t.addFieldOffset(0,e,0)},O.InputPedometer.addEnddate=function(t,e){t.addFieldOffset(1,e,0)},O.InputPedometer.addSteps=function(t,e){t.addFieldFloat32(2,e,0)},O.InputPedometer.addDistance=function(t,e){t.addFieldFloat32(3,e,0)},O.InputPedometer.addAverageactivepace=function(t,e){t.addFieldFloat32(4,e,0)},O.InputPedometer.addCurrentpace=function(t,e){t.addFieldFloat32(5,e,0)},O.InputPedometer.addCurrentcadence=function(t,e){t.addFieldFloat32(6,e,0)},O.InputPedometer.addFloorsasc=function(t,e){t.addFieldFloat32(7,e,0)},O.InputPedometer.addFloorsdes=function(t,e){t.addFieldFloat32(8,e,0)},O.InputPedometer.endInputPedometer=function(t){return t.endObject()},O.InputProximity=function(){this.bb=null,this.bb_pos=0},O.InputProximity.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},O.InputProximity.getRootAsInputProximity=function(t,e){return(e||new O.InputProximity).__init(t.readInt32(t.position())+t.position(),t)},O.InputProximity.prototype.proximity=function(){var t=this.bb.__offset(this.bb_pos,4);return!!t&&!!this.bb.readInt8(this.bb_pos+t)},O.InputProximity.startInputProximity=function(t){t.startObject(1)},O.InputProximity.addProximity=function(t,e){t.addFieldInt8(0,+e,0)},O.InputProximity.endInputProximity=function(t){return t.endObject()},O.InputAmbientLight=function(){this.bb=null,this.bb_pos=0},O.InputAmbientLight.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},O.InputAmbientLight.getRootAsInputAmbientLight=function(t,e){return(e||new O.InputAmbientLight).__init(t.readInt32(t.position())+t.position(),t)},O.InputAmbientLight.prototype.reserved=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readFloat32(this.bb_pos+t):0},O.InputAmbientLight.startInputAmbientLight=function(t){t.startObject(1)},O.InputAmbientLight.addReserved=function(t,e){t.addFieldFloat32(0,e,0)},O.InputAmbientLight.endInputAmbientLight=function(t){return t.endObject()},O.InputTemperature=function(){this.bb=null,this.bb_pos=0},O.InputTemperature.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},O.InputTemperature.getRootAsInputTemperature=function(t,e){return(e||new O.InputTemperature).__init(t.readInt32(t.position())+t.position(),t)},O.InputTemperature.prototype.temperature=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readFloat32(this.bb_pos+t):0},O.InputTemperature.startInputTemperature=function(t){t.startObject(1)},O.InputTemperature.addTemperature=function(t,e){t.addFieldFloat32(0,e,0)},O.InputTemperature.endInputTemperature=function(t){return t.endObject()},O.InputMoisture=function(){this.bb=null,this.bb_pos=0},O.InputMoisture.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},O.InputMoisture.getRootAsInputMoisture=function(t,e){return(e||new O.InputMoisture).__init(t.readInt32(t.position())+t.position(),t)},O.InputMoisture.prototype.moisture=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readFloat32(this.bb_pos+t):0},O.InputMoisture.startInputMoisture=function(t){t.startObject(1)},O.InputMoisture.addMoisture=function(t,e){t.addFieldFloat32(0,e,0)},O.InputMoisture.endInputMoisture=function(t){return t.endObject()},O.OutputString=function(){this.bb=null,this.bb_pos=0},O.OutputString.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},O.OutputString.getRootAsOutputString=function(t,e){return(e||new O.OutputString).__init(t.readInt32(t.position())+t.position(),t)},O.OutputString.prototype.msg=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null},O.OutputString.startOutputString=function(t){t.startObject(1)},O.OutputString.addMsg=function(t,e){t.addFieldOffset(0,e,0)},O.OutputString.endOutputString=function(t){return t.endObject()},O.OutputScreen=function(){this.bb=null,this.bb_pos=0},O.OutputScreen.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},O.OutputScreen.getRootAsOutputScreen=function(t,e){return(e||new O.OutputScreen).__init(t.readInt32(t.position())+t.position(),t)},O.OutputScreen.prototype.rotation=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):0},O.OutputScreen.prototype.width=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint16(this.bb_pos+t):1280},O.OutputScreen.prototype.height=function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint16(this.bb_pos+t):720},O.OutputScreen.prototype.fps=function(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readUint16(this.bb_pos+t):60},O.OutputScreen.startOutputScreen=function(t){t.startObject(4)},O.OutputScreen.addRotation=function(t,e){t.addFieldInt8(0,e,0)},O.OutputScreen.addWidth=function(t,e){t.addFieldInt16(1,e,1280)},O.OutputScreen.addHeight=function(t,e){t.addFieldInt16(2,e,720)},O.OutputScreen.addFps=function(t,e){t.addFieldInt16(3,e,60)},O.OutputScreen.endOutputScreen=function(t){return t.endObject()},O.OutputVibration=function(){this.bb=null,this.bb_pos=0},O.OutputVibration.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},O.OutputVibration.getRootAsOutputVibration=function(t,e){return(e||new O.OutputVibration).__init(t.readInt32(t.position())+t.position(),t)},O.OutputVibration.prototype.l=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readUint16(this.bb_pos+t):0},O.OutputVibration.prototype.r=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint16(this.bb_pos+t):0},O.OutputVibration.startOutputVibration=function(t){t.startObject(2)},O.OutputVibration.addL=function(t,e){t.addFieldInt16(0,e,0)},O.OutputVibration.addR=function(t,e){t.addFieldInt16(1,e,0)},O.OutputVibration.endOutputVibration=function(t){return t.endObject()},O.OutputCursor=function(){this.bb=null,this.bb_pos=0},O.OutputCursor.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},O.OutputCursor.getRootAsOutputCursor=function(t,e){return(e||new O.OutputCursor).__init(t.readInt32(t.position())+t.position(),t)},O.OutputCursor.prototype.x=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readFloat32(this.bb_pos+t):0},O.OutputCursor.prototype.y=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readFloat32(this.bb_pos+t):0},O.OutputCursor.prototype.opt=function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):0},O.OutputCursor.startOutputCursor=function(t){t.startObject(3)},O.OutputCursor.addX=function(t,e){t.addFieldFloat32(0,e,0)},O.OutputCursor.addY=function(t,e){t.addFieldFloat32(1,e,0)},O.OutputCursor.addOpt=function(t,e){t.addFieldInt32(2,e,0)},O.OutputCursor.endOutputCursor=function(t){return t.endObject()},O.AVAudio=function(){this.bb=null,this.bb_pos=0},O.AVAudio.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},O.AVAudio.getRootAsAVAudio=function(t,e){return(e||new O.AVAudio).__init(t.readInt32(t.position())+t.position(),t)},O.AVAudio.prototype.data=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt8(this.bb.__vector(this.bb_pos+e)+t):0},O.AVAudio.prototype.dataLength=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0},O.AVAudio.prototype.dataArray=function(){var t=this.bb.__offset(this.bb_pos,4);return t?new Int8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null},O.AVAudio.startAVAudio=function(t){t.startObject(1)},O.AVAudio.addData=function(t,e){t.addFieldOffset(0,e,0)},O.AVAudio.createDataVector=function(t,e){t.startVector(1,e.length,1);for(var n=e.length-1;0<=n;n--)t.addInt8(e[n]);return t.endVector()},O.AVAudio.startDataVector=function(t,e){t.startVector(1,e,1)},O.AVAudio.endAVAudio=function(t){return t.endObject()},O.AVVideo=function(){this.bb=null,this.bb_pos=0},O.AVVideo.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},O.AVVideo.getRootAsAVVideo=function(t,e){return(e||new O.AVVideo).__init(t.readInt32(t.position())+t.position(),t)},O.AVVideo.prototype.data=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt8(this.bb.__vector(this.bb_pos+e)+t):0},O.AVVideo.prototype.dataLength=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0},O.AVVideo.prototype.dataArray=function(){var t=this.bb.__offset(this.bb_pos,4);return t?new Int8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null},O.AVVideo.startAVVideo=function(t){t.startObject(1)},O.AVVideo.addData=function(t,e){t.addFieldOffset(0,e,0)},O.AVVideo.createDataVector=function(t,e){t.startVector(1,e.length,1);for(var n=e.length-1;0<=n;n--)t.addInt8(e[n]);return t.endVector()},O.AVVideo.startDataVector=function(t,e){t.startVector(1,e,1)},O.AVVideo.endAVVideo=function(t){return t.endObject()},O.AVSubTitle=function(){this.bb=null,this.bb_pos=0},O.AVSubTitle.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},O.AVSubTitle.getRootAsAVSubTitle=function(t,e){return(e||new O.AVSubTitle).__init(t.readInt32(t.position())+t.position(),t)},O.AVSubTitle.prototype.data=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null},O.AVSubTitle.startAVSubTitle=function(t){t.startObject(1)},O.AVSubTitle.addData=function(t,e){t.addFieldOffset(0,e,0)},O.AVSubTitle.endAVSubTitle=function(t){return t.endObject()},O.AuthList=function(){this.bb=null,this.bb_pos=0},O.AuthList.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},O.AuthList.getRootAsAuthList=function(t,e){return(e||new O.AuthList).__init(t.readInt32(t.position())+t.position(),t)},O.AuthList.prototype.data=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null},O.AuthList.prototype.errorcode=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0},O.AuthList.startAuthList=function(t){t.startObject(2)},O.AuthList.addData=function(t,e){t.addFieldOffset(0,e,0)},O.AuthList.addErrorcode=function(t,e){t.addFieldInt32(1,e,0)},O.AuthList.endAuthList=function(t){return t.endObject()},O.ResolutionLevel=function(){this.bb=null,this.bb_pos=0},O.ResolutionLevel.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},O.ResolutionLevel.getRootAsResolutionLevel=function(t,e){return(e||new O.ResolutionLevel).__init(t.readInt32(t.position())+t.position(),t)},O.ResolutionLevel.prototype.level=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):2},O.ResolutionLevel.prototype.width=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint16(this.bb_pos+t):480},O.ResolutionLevel.prototype.height=function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint16(this.bb_pos+t):800},O.ResolutionLevel.startResolutionLevel=function(t){t.startObject(3)},O.ResolutionLevel.addLevel=function(t,e){t.addFieldInt32(0,e,2)},O.ResolutionLevel.addWidth=function(t,e){t.addFieldInt16(1,e,480)},O.ResolutionLevel.addHeight=function(t,e){t.addFieldInt16(2,e,800)},O.ResolutionLevel.endResolutionLevel=function(t){return t.endObject()};var T={SIZEOF_SHORT:2,SIZEOF_INT:4,FILE_IDENTIFIER_LENGTH:4,Encoding:{UTF8_BYTES:1,UTF16_STRING:2}};T.int32=new Int32Array(2),T.float32=new Float32Array(T.int32.buffer),T.float64=new Float64Array(T.int32.buffer),T.isLittleEndian=1===new Uint16Array(new Uint8Array([1,0]).buffer)[0],T.Long=function(t,e){this.low=0|t,this.high=0|e},T.Long.create=function(t,e){return 0==t&&0==e?T.Long.ZERO:new T.Long(t,e)},T.Long.prototype.toFloat64=function(){return(this.low>>>0)+4294967296*this.high},T.Long.prototype.equals=function(t){return this.low==t.low&&this.high==t.high},T.Long.ZERO=new T.Long(0,0),T.Builder=function(t){if(t)e=t;else var e=1024;this.bb=T.ByteBuffer.allocate(e),this.space=e,this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},T.Builder.prototype.forceDefaults=function(t){this.force_defaults=t},T.Builder.prototype.dataBuffer=function(){return this.bb},T.Builder.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())},T.Builder.prototype.prep=function(t,e){t>this.minalign&&(this.minalign=t);for(var n=1+~(this.bb.capacity()-this.space+e)&t-1;this.space<n+t+e;){var o=this.bb.capacity();this.bb=T.Builder.growByteBuffer(this.bb),this.space+=this.bb.capacity()-o}this.pad(n)},T.Builder.prototype.pad=function(t){for(var e=0;e<t;e++)this.bb.writeInt8(--this.space,0)},T.Builder.prototype.writeInt8=function(t){this.bb.writeInt8(--this.space,t)},T.Builder.prototype.writeInt16=function(t){this.bb.writeInt16(this.space-=2,t)},T.Builder.prototype.writeInt32=function(t){this.bb.writeInt32(this.space-=4,t)},T.Builder.prototype.writeInt64=function(t){this.bb.writeInt64(this.space-=8,t)},T.Builder.prototype.writeFloat32=function(t){this.bb.writeFloat32(this.space-=4,t)},T.Builder.prototype.writeFloat64=function(t){this.bb.writeFloat64(this.space-=8,t)},T.Builder.prototype.addInt8=function(t){this.prep(1,0),this.writeInt8(t)},T.Builder.prototype.addInt16=function(t){this.prep(2,0),this.writeInt16(t)},T.Builder.prototype.addInt32=function(t){this.prep(4,0),this.writeInt32(t)},T.Builder.prototype.addInt64=function(t){this.prep(8,0),this.writeInt64(t)},T.Builder.prototype.addFloat32=function(t){this.prep(4,0),this.writeFloat32(t)},T.Builder.prototype.addFloat64=function(t){this.prep(8,0),this.writeFloat64(t)},T.Builder.prototype.addFieldInt8=function(t,e,n){!this.force_defaults&&e==n||(this.addInt8(e),this.slot(t))},T.Builder.prototype.addFieldInt16=function(t,e,n){!this.force_defaults&&e==n||(this.addInt16(e),this.slot(t))},T.Builder.prototype.addFieldInt32=function(t,e,n){!this.force_defaults&&e==n||(this.addInt32(e),this.slot(t))},T.Builder.prototype.addFieldInt64=function(t,e,n){!this.force_defaults&&e.equals(n)||(this.addInt64(e),this.slot(t))},T.Builder.prototype.addFieldFloat32=function(t,e,n){!this.force_defaults&&e==n||(this.addFloat32(e),this.slot(t))},T.Builder.prototype.addFieldFloat64=function(t,e,n){!this.force_defaults&&e==n||(this.addFloat64(e),this.slot(t))},T.Builder.prototype.addFieldOffset=function(t,e,n){!this.force_defaults&&e==n||(this.addOffset(e),this.slot(t))},T.Builder.prototype.addFieldStruct=function(t,e,n){e!=n&&(this.nested(e),this.slot(t))},T.Builder.prototype.nested=function(t){if(t!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")},T.Builder.prototype.notNested=function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")},T.Builder.prototype.slot=function(t){this.vtable[t]=this.offset()},T.Builder.prototype.offset=function(){return this.bb.capacity()-this.space},T.Builder.growByteBuffer=function(t){var e=t.capacity();if(3221225472&e)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var n=e<<1,o=T.ByteBuffer.allocate(n);return o.setPosition(n-e),o.bytes().set(t.bytes(),n-e),o},T.Builder.prototype.addOffset=function(t){this.prep(T.SIZEOF_INT,0),this.writeInt32(this.offset()-t+T.SIZEOF_INT)},T.Builder.prototype.startObject=function(t){this.notNested(),null==this.vtable&&(this.vtable=[]),this.vtable_in_use=t;for(var e=0;e<t;e++)this.vtable[e]=0;this.isNested=!0,this.object_start=this.offset()},T.Builder.prototype.endObject=function(){if(null==this.vtable||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var t=this.offset(),e=this.vtable_in_use-1;0<=e;e--)this.addInt16(0!=this.vtable[e]?t-this.vtable[e]:0);this.addInt16(t-this.object_start),this.addInt16((this.vtable_in_use+2)*T.SIZEOF_SHORT);var n=0;t:for(e=0;e<this.vtables.length;e++){var o=this.bb.capacity()-this.vtables[e],i=this.space,r=this.bb.readInt16(o);if(r==this.bb.readInt16(i)){for(var s=T.SIZEOF_SHORT;s<r;s+=T.SIZEOF_SHORT)if(this.bb.readInt16(o+s)!=this.bb.readInt16(i+s))continue t;n=this.vtables[e];break}}return n?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,n-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t},T.Builder.prototype.finish=function(t,e){if(e){var n=e;if(this.prep(this.minalign,T.SIZEOF_INT+T.FILE_IDENTIFIER_LENGTH),n.length!=T.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+T.FILE_IDENTIFIER_LENGTH);for(var o=T.FILE_IDENTIFIER_LENGTH-1;0<=o;o--)this.writeInt8(n.charCodeAt(o))}this.prep(this.minalign,T.SIZEOF_INT),this.addOffset(t),this.bb.setPosition(this.space)},T.Builder.prototype.requiredField=function(t,e){var n=this.bb.capacity()-t,o=n-this.bb.readInt32(n);if(!(0!=this.bb.readInt16(o+e)))throw new Error("FlatBuffers: field "+e+" must be set")},T.Builder.prototype.startVector=function(t,e,n){this.notNested(),this.vector_num_elems=e,this.prep(T.SIZEOF_INT,t*e),this.prep(n,t*e)},T.Builder.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset()},T.Builder.prototype.createString=function(t){if(t instanceof Uint8Array)var e=t;else{e=[];for(var n=0;n<t.length;){var o,i=t.charCodeAt(n++);if(i<55296||56320<=i)o=i;else o=(i<<10)+t.charCodeAt(n++)+-56613888;o<128?e.push(o):(o<2048?e.push(o>>6&31|192):(o<65536?e.push(o>>12&15|224):e.push(o>>18&7|240,o>>12&63|128),e.push(o>>6&63|128)),e.push(63&o|128))}}this.addInt8(0),this.startVector(1,e.length,1),this.bb.setPosition(this.space-=e.length);n=0;for(var r=this.space,s=this.bb.bytes();n<e.length;n++)s[r++]=e[n];return this.endVector()},T.Builder.prototype.createLong=function(t,e){return T.Long.create(t,e)},T.ByteBuffer=function(t){this.bytes_=t,this.position_=0},T.ByteBuffer.allocate=function(t){return new T.ByteBuffer(new Uint8Array(t))},T.ByteBuffer.prototype.bytes=function(){return this.bytes_},T.ByteBuffer.prototype.position=function(){return this.position_},T.ByteBuffer.prototype.setPosition=function(t){this.position_=t},T.ByteBuffer.prototype.capacity=function(){return this.bytes_.length},T.ByteBuffer.prototype.readInt8=function(t){return this.readUint8(t)<<24>>24},T.ByteBuffer.prototype.readUint8=function(t){return this.bytes_[t]},T.ByteBuffer.prototype.readInt16=function(t){return this.readUint16(t)<<16>>16},T.ByteBuffer.prototype.readUint16=function(t){return this.bytes_[t]|this.bytes_[t+1]<<8},T.ByteBuffer.prototype.readInt32=function(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24},T.ByteBuffer.prototype.readUint32=function(t){return this.readInt32(t)>>>0},T.ByteBuffer.prototype.readInt64=function(t){return new T.Long(this.readInt32(t),this.readInt32(t+4))},T.ByteBuffer.prototype.readUint64=function(t){return new T.Long(this.readUint32(t),this.readUint32(t+4))},T.ByteBuffer.prototype.readFloat32=function(t){return T.int32[0]=this.readInt32(t),T.float32[0]},T.ByteBuffer.prototype.readFloat64=function(t){return T.int32[T.isLittleEndian?0:1]=this.readInt32(t),T.int32[T.isLittleEndian?1:0]=this.readInt32(t+4),T.float64[0]},T.ByteBuffer.prototype.writeInt8=function(t,e){this.bytes_[t]=e},T.ByteBuffer.prototype.writeUint8=function(t,e){this.bytes_[t]=e},T.ByteBuffer.prototype.writeInt16=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8},T.ByteBuffer.prototype.writeUint16=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8},T.ByteBuffer.prototype.writeInt32=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24},T.ByteBuffer.prototype.writeUint32=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24},T.ByteBuffer.prototype.writeInt64=function(t,e){this.writeInt32(t,e.low),this.writeInt32(t+4,e.high)},T.ByteBuffer.prototype.writeUint64=function(t,e){this.writeUint32(t,e.low),this.writeUint32(t+4,e.high)},T.ByteBuffer.prototype.writeFloat32=function(t,e){T.float32[0]=e,this.writeInt32(t,T.int32[0])},T.ByteBuffer.prototype.writeFloat64=function(t,e){T.float64[0]=e,this.writeInt32(t,T.int32[T.isLittleEndian?0:1]),this.writeInt32(t+4,T.int32[T.isLittleEndian?1:0])},T.ByteBuffer.prototype.__offset=function(t,e){var n=t-this.readInt32(t);return e<this.readInt16(n)?this.readInt16(n+e):0},T.ByteBuffer.prototype.__union=function(t,e){return t.bb_pos=e+this.readInt32(e),t.bb=this,t},T.ByteBuffer.prototype.__string=function(t,e){t+=this.readInt32(t);var n=this.readInt32(t),o="",i=0;if(t+=T.SIZEOF_INT,e===T.Encoding.UTF8_BYTES)return this.bytes_.subarray(t,t+n);for(;i<n;){var r,s=this.readUint8(t+i++);if(s<192)r=s;else{var a=this.readUint8(t+i++);if(s<224)r=(31&s)<<6|63&a;else{var u=this.readUint8(t+i++);if(s<240)r=(15&s)<<12|(63&a)<<6|63&u;else r=(7&s)<<18|(63&a)<<12|(63&u)<<6|63&this.readUint8(t+i++)}}r<65536?o+=String.fromCharCode(r):(r-=65536,o+=String.fromCharCode(55296+(r>>10),56320+(1023&r)))}return o},T.ByteBuffer.prototype.__indirect=function(t){return t+this.readInt32(t)},T.ByteBuffer.prototype.__vector=function(t){return t+this.readInt32(t)+T.SIZEOF_INT},T.ByteBuffer.prototype.__vector_len=function(t){return this.readInt32(t+this.readInt32(t))},T.ByteBuffer.prototype.__has_identifier=function(t){if(t.length!=T.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+T.FILE_IDENTIFIER_LENGTH);for(var e=0;e<T.FILE_IDENTIFIER_LENGTH;e++)if(t.charCodeAt(e)!=this.readInt8(this.position_+T.SIZEOF_INT+e))return!1;return!0},T.ByteBuffer.prototype.createLong=function(t,e){return T.Long.create(t,e)};var E={ERROR:{SUCCESS:0,UNKNOW_ERR:1e3,HELLO_ERR:1001,HELLO_ANSWER_ERR:1002,MAIN_TYPE_ERR:1003,SHAKE_ONLINE_ERR:1004,SHAKE_KICK_ERR:1005,START_APP_ERR:1006,WEBSOCK_CLOSE:2001,WEBSOCK_ERR:2002,WEBSOCK_NOT_SUPPORT:2003,WEBSOCK_RECONNECT:2004},EVENT:{SCREEN_ROTATION:101,START_APP:102,COUNT_TIME:103},CONTROL_ERROR:{EP_NOT_SHAKE_HAND:196609,EP_INVALID_DATA:196610,EP_DEVICE_OFFLINE:196611,EP_DEVICE_DISCONNECT:196612,EP_DROPPED_BY_USER:196613,EP_DROPED_BY_IDLE:196614,EP_DEVICE_UNCONTROLED:196615,EP_DEVICE_DISABLED:196616,EP_DEVICE_NOT_EXIST:196617,EP_DEVICE_NOTBELONG_USER:196618,EP_DEVICE_EXPIRED:196619,EP_DEVICE_FAULTABLE:196620,EP_SESSION_EXPIRED:196621,EP_DEVICE_MALFUNCTIONS:196622,EP_DEVICE_GRANT_EXPIRED:196623,EP_INVALID_APP:196624,EP_ILLEGAL_OPERATION:196625,EP_DEVICE_CTL_TIME_LIMITED:196626,EP_START_APP_FAILED:196627,EP_CONNECT_DISCONECT:196628},KEY_TYPE:{KEY_MENU:139,KEY_BACK:158,KEY_HOMEPAGE:172},MSG_TYPE:{MSG_SHAKE:0,MSG_CONTROL:1,MSG_INPUT:2,MSG_OUTPUT:3,MSG_AV:4,MSG_AUTH:5,MSG_COMM:6},MSG_SHAKE_TYPE:{MSG_SHAKE_ONLINE:0,MSG_SHAKE_ONLINE_R:1,MSG_SHAKE_OFFLINE:2,MSG_SHAKE_OFFLINE_R:3,MSG_SHAKE_KICK:4,MSG_SHAKE_AND_PLAY:5,MSG_SHAKE_AND_PLAY_R:6},MSG_CONTROL_TYPE:{MSG_CONTROL_MTU:0,MSG_CONTROL_MTU_R:1,MSG_CONTROL_DELAY:2,MSG_CONTROL_DELAY_R:3,MSG_CONTROL_APP:4,MSG_CONTROL_APP_R:5,MSG_CONTROL_AVFMT:6,MSG_CONTROL_AVFMT_R:7,MSG_CONTROL_AVTRANS:8,MSG_CONTROL_AVTRANS_R:9,MSG_CONTROL_IFRAME:10,MSG_CONTROL_AUDIO:11,MSG_CONTROL_AUDIO_R:12,MSG_CONTROL_VIDEO:13,MSG_CONTROL_VIDEO_R:14,MSG_CONTROL_TIME:15,MSG_CONTROL_SCREEN:16,MSG_CONTROL_KILL_APP:17,MSG_CONTROL_KILL_APP_R:18,MSG_CONTROL_RESOLUTIONLEVEL:19},MSG_INPUT_TYPE:{MSG_INPUT_STRING:0,MSG_INPUT_GAMECONTROLLER:1,MSG_INPUT_KEYBOARD:100,MSG_INPUT_MOUSE_KEY:101,MSG_INPUT_MOUSE_WHEEL:102,MSG_INPUT_MOUSE_MOVE:103,MSG_INPUT_CURSOR:104,MSG_INPUT_TOUCH:200,MSG_INPUT_LOCATION:201,MSG_INPUT_ACCELEROMETER:202,MSG_INPUT_ALTIMETER:203,MSG_INPUT_GYRO:204,MSG_INPUT_MAGNETOMETER:205,MSG_INPUT_PEDOMETER:206,MSG_INPUT_PROXIMITY:207,MSG_INPUT_AMBIENTLIGHT:208,MSG_INPUT_TEMPERATURE:209,MSG_INPUT_MOISTURE:210},MSG_OUTPUT_TYPE:{MSG_OUTPUT_STRING:0,MSG_OUTPUT_SCREEN:1,MSG_OUTPUT_VIBRATION:2,MSG_OUTPUT_CURSOR:3},MSG_AV_TYPE:{MSG_AV_AUDIO:0,MSG_AV_VIDEO:1,MSG_AV_SUBTITLE:2,MSG_AV_CLIENT_AUDIO:3,MSG_AV_CLIENT_VIDEO:4,MSG_AV_CLIENT_SUBTITLE:5},MSG_COMM_TYPE:{MSG_COMM_JSON:1,MSG_COMM_DELIVER:2,MSG_COMM_RGBA_DATA:3,MSG_COMM_JPGE_DATA:4,MSG_COMM_YUV_DATA:5},SHAKETYPE:{PLAY_DEMO:0,PLAY_REDFINGER:1,PLAY_PC:0,PLAY_PHONE:256,PLAY_WEB:0,PLAY_TCP:65536}},F={elemVideo_:{},mgAppController_:{},lasttouch_:{},lastX_:0,lastY_:0,isDown_:!1,isFastClick:!0,config_:{pageVideo:{width:480,height:853,phoneRotation:0,topOff:0,letfOff:0},padVideo:{width:720,height:1280}},TOUCH_TYPE:{TOUCH_DOWN:0,TOUCH_UP:1,TOUCH_MOVE:2,TOUCH_CANCEL:3},startTouch:function(t,e,n){if(F.elemVideo_=_("#"+t),F.mgAppController_=e,F.elemVideo_){if(n&&1==n)h.getIsPc()?(h.trace("mg page is pc"),F.elemVideo_.addEventListener("mousedown",u,!1),F.elemVideo_.addEventListener("mousemove",w,!1),F.elemVideo_.addEventListener("mouseup",P,!1),F.elemVideo_.addEventListener("ended",M,!1)):(h.trace("mg page is phone"),F.elemVideo_.addEventListener("touchstart",V,!1),F.elemVideo_.addEventListener("touchmove",k,!1),F.elemVideo_.addEventListener("touchend",L,!1));F.setPageVideoWH(),window.addEventListener("resize",F.setPageVideoWH,!1)}},initPhoneSize_:function(t){},initVideoMuted_:function(){1==F.isFastClick&&F.elemVideo_&&(F.elemVideo_.muted=!1,F.elemVideo_.play(),F.isFastClick=!1)},setPageVideoWH:function(){F.config_.pageVideo.topOff=0,F.config_.pageVideo.letfOff=0;var t=F.elemVideo_.parentNode,e=h.getIsPc();if(t){t.style.display="flex";var n=t.offsetHeight,o=t.offsetWidth;t.width=o,t.height=n;var i=F.config_.padVideo.height,r=F.config_.padVideo.width,s=0,a=0;if(n<i||o<r?i*o<r*n?s=(a=o)*i/r:(a=r*(s=n)/i,F.config_.pageVideo.letfOff=Math.round((o-a)/2)):(a=r,s=i),a=Math.round(a),s=Math.round(s),F.config_.pageVideo.width=a,F.config_.pageVideo.height=s,F.elemVideo_.width=a,F.elemVideo_.height=s,!e){var u=F.elemVideo_.offsetTop,p=F.elemVideo_.offsetLeft;0===u&&0===p&&(u=F.elemVideo_.offsetParent.offsetTop,p=F.elemVideo_.offsetParent.offsetLeft),F.config_.pageVideo.topOff+=u,F.config_.pageVideo.letfOff+=p}}}},u=function(t){F.initPhoneSize_(t);var e=t.offsetX,n=t.offsetY;F.lastX_=e,F.lastY_=n;var o=F.transform_(e,n);F.isDown_=!0,F.mgAppController_.sendTouch_(F.TOUCH_TYPE.TOUCH_DOWN,o.x,o.y)},P=function(t){F.initPhoneSize_(t),F.initVideoMuted_();var e=t.offsetX,n=t.offsetY,o=F.transform_(e,n);F.isDown_=!1,F.mgAppController_.sendTouch_(F.TOUCH_TYPE.TOUCH_UP,o.x,o.y)},w=function(t){F.initPhoneSize_(t);var e=t.offsetX,n=t.offsetY,o=F.transform_(e,n);F.isDown_&&F.mgAppController_.sendTouch_(F.TOUCH_TYPE.TOUCH_MOVE,o.x,o.y)},M=function(){},V=function(t){F.initPhoneSize_(t),t.preventDefault();for(var e=[],n=0;n<t.targetTouches.length;n++){var o=F.transform_(t.targetTouches[n].pageX-F.config_.pageVideo.letfOff,t.targetTouches[n].pageY);e.push(o),F.lasttouch_=o}F.mgAppController_.sendTouchMulti_(F.TOUCH_TYPE.TOUCH_DOWN,e)},k=function(t){F.initPhoneSize_(t),t.preventDefault();for(var e=[],n=t.targetTouches.length,o=0;o<n;o++){var i=F.transform_(t.targetTouches[o].pageX-F.config_.pageVideo.letfOff,t.targetTouches[o].pageY);e.push(i),F.lasttouch_=i}F.mgAppController_.sendTouchMulti_(F.TOUCH_TYPE.TOUCH_MOVE,e)},L=function(t){F.initPhoneSize_(t),F.initVideoMuted_();for(var e=[],n=0;n<t.targetTouches.length;n++){var o=F.transform_(t.targetTouches[n].pageX-F.config_.pageVideo.letfOff,t.targetTouches[n].pageY);e.push(o),F.lasttouch_=o}F.mgAppController_.sendTouchMulti_(F.TOUCH_TYPE.TOUCH_UP,e)};F.transform_=function(t,e){if(1==F.config_.pageVideo.phoneRotation){var n=F.config_.pageVideo.width-e;e=t+(F.config_.pageVideo.width/2-F.config_.pageVideo.width/10),t=n}e-=F.config_.pageVideo.topOff;var o=t*F.config_.padVideo.width/F.config_.pageVideo.width,i=e*F.config_.padVideo.height/F.config_.pageVideo.height;return{x:o=Math.round(o),y:i=Math.round(i)}},F.setPageVideoPotation=function(t){F.config_.pageVideo.phoneRotation=t;var e=F.config_.pageVideo.width,n=F.config_.pageVideo.height;F.config_.pageVideo.width=n,F.config_.pageVideo.height=e,F.elemVideo_.width=n,F.elemVideo_.height=e};function U(){this.elemVideoId_="",this.config_={uid:"",sessionid:"",padcode:"",playAppPackage:"",websockHost:"",protocol:"ws",isAudio:!0,isDebug:!0,operTimeout:2,roomId:"",videoConf:null},this.net_stat_list_={disconnect:0,connnect:1,sayhello:2,helloask:3,helloanswer:4,sendshake:5,online:6,sendapp:7,destory:8},this.net_status_=this.net_stat_list_.disconnect,this.websocketWorker_=null,this.heartbeatInterval_=null,this.addMethod_(this,"startPlay",this.startPlay_),this.addMethod_(this,"startPlay",this.startPlayIp_)}U.prototype.test11=function(){console.log("mg ,  MgAppController.prototype.test11")},U.prototype.name="MgAppController.0.0.2",U.prototype.startPlay_=function(t,e,n){this.config_.uid=""+t.resultInfo.userId,this.config_.sessionid=t.resultInfo.sessionId,this.config_.padcode=t.padCode,this.config_.videoQuality=e,this.config_.playAppPackage=n&&0<n.length?n:"",this.config_.roomId=t.roomId&&5<t.roomId.length?t.roomId:t.resultInfo.sessionId,t.videoConf&&(this.config_.videoConf=t.videoConf);var o=t.resultInfo.webControlList[0].webControlInfoList[0];this.config_.websockHost=this.config_.protocol+"://"+o.controlIp+":"+o.controlPort,this.createWebSocketWorker_();var i=this;this.websocketWorker_.onmessage=function(t){if("close"===t.data)return console.log("mg ,  websocketWorker_  websocket close"),void(i.heartbeatInterval_&&window.clearInterval(i.heartbeatInterval_));i.processData_(t.data)},this.heartbeatInterval_=window.setInterval(function(){i.sendControlDelay_.call(i)},1e3)},U.prototype.startPlayIp_=function(t,e){t.padCode=e,this.startPlay_(t,2,"","")},U.prototype.createWebSocketWorker_=function(){if("undefined"!=typeof Worker){var t=new Blob(["(",r.getStr,")()"],{type:"application/javascript"});t=window.URL.createObjectURL(t),this.websocketWorker_=new Worker(t),this.sendHello_(),this.sendMessage("createWebSocket",this.config_.websockHost)}else h.trace("此浏览器不支持 Worker","MgAppController.createWebSocketWorker")},U.prototype.sendMessage=function(t,e){1===arguments.length&&(t="sendBuff",e=arguments[0]),this.websocketWorker_&&this.websocketWorker_.postMessage({type:t,value:e})},U.prototype.setConfig=function(t){t&&h.objAssign(this.config_,t)},U.prototype.addMethod_=function(t,e,n){var o=t[e];t[e]=function(){return n.length===arguments.length?n.apply(this,arguments):"function"==typeof o?o.apply(this,arguments):void 0}},U.prototype.processData_=function(t){switch(this.net_status_){case this.net_stat_list_.disconnect:case this.net_stat_list_.connnect:break;case this.net_stat_list_.sayhello:if(0!=this.readLittle32_(t,0))return h.trace("onReturn-ERROR:"+E.ERROR.HELLO_ERR,"processData_"),-1;var e=this.readLittle32_(t,4);this.sendVerify_(e),this.net_status_=this.net_stat_list_.helloanswer;break;case this.net_stat_list_.helloask:case this.net_stat_list_.helloanswer:if(0!=this.readLittle32_(t,0))return h.trace("onReturn-ERROR:"+E.ERROR.HELLO_ANSWER_ERR,"processData_"),-1;this.sendHelloAnswer_(),this.sendShakeOnline_(this.config_.uid,this.config_.sessionid,this.config_.padcode,this.config_.playAppPackage),this.net_status_=this.net_stat_list_.sendshake;break;case this.net_stat_list_.sendshake:var n=this.getHead_(t.buffer);if(n.mainType===E.MSG_TYPE.MSG_SHAKE)return this.connOnShake_(t,n);if(n.mainType===E.MSG_TYPE.MSG_CONTROL)return this.connOnControl_(t,n);if(n.mainType===E.MSG_TYPE.MSG_OUTPUT)return this.connOnOutput_(t,n)}return 0},U.prototype.connOnOutput_=function(t,e){switch(e.subType){case E.MSG_OUTPUT_TYPE.MSG_OUTPUT_SCREEN:var n=new Uint8Array(t.buffer,6,t.length-6),o=new T.ByteBuffer(n),i=O.OutputScreen.getRootAsOutputScreen(o);break;case E.MSG_OUTPUT_TYPE.MSG_OUTPUT_CURSOR:n=new Uint8Array(t.buffer,6,t.length-6),o=new T.ByteBuffer(n);(i=O.OutputCursor.getRootAsOutputCursor(o)).opt(),i.opt()}return 0},U.prototype.connOnShake_=function(t,e){var n=new Uint8Array(t.buffer,6,t.length-6),o=new T.ByteBuffer(n);switch(e.subType){case E.MSG_SHAKE_TYPE.MSG_SHAKE_ONLINE_R:var i=O.ShakeOnlineR.getRootAsShakeOnlineR(o);if(!this.checkControlError_(i.code()))return console.log("mg , onnect error connOnShake_.MSG_SHAKE_ONLINE_R"),-1;if(""!==this.config_.playAppPackage&&this.controlStartApp_(this.config_.playAppPackage),this.config_.roomId&&""!==this.config_.roomId){var r,s,a=this;r=setTimeout(function(){a.controlSetConfRoom_(a.config_.videoConf),s=setTimeout(function(){a.controlJoinRoom_(a.config_.roomId),clearTimeout(s)},200),clearTimeout(r)},100)}break;case E.MSG_SHAKE_TYPE.MSG_SHAKE_KICK:i=O.ShakeKickR.getRootAsShakeKickR(o);if(!this.checkControlError_(i.code()))return-1}return 0},U.prototype.connOnControl_=function(t,e){var n=new Uint8Array(t.buffer,6,t.length-6),o=new T.ByteBuffer(n);switch(e.subType){case E.MSG_CONTROL_TYPE.MSG_CONTROL_DELAY_R:break;case E.MSG_CONTROL_TYPE.MSG_CONTROL_DELAY:this.sendControlDelayR_(o,200);break;case E.MSG_CONTROL_TYPE.MSG_CONTROL_AUDIO_R:case E.MSG_CONTROL_TYPE.MSG_CONTROL_VIDEO_R:case E.MSG_CONTROL_TYPE.MSG_CONTROL_SCREEN:}return 0},U.prototype.controlStartApp_=function(t){var e=new T.Builder(0),n=e.createString(t);O.ControlApp.startControlApp(e),O.ControlApp.addApp(e,n);var o=O.ControlApp.endControlApp(e);e.finish(o);var i=this.getFlatPack_(e.asUint8Array(),E.MSG_TYPE.MSG_CONTROL,E.MSG_CONTROL_TYPE.MSG_CONTROL_APP);this.sendMessage(i)},U.prototype.controlScreen_=function(){var t=new T.Builder(1);O.ControlScreen.startControlScreen(t),O.ControlScreen.addZoom(t,1);var e=O.ControlScreen.endControlScreen(t);t.finish(e);var n=this.getFlatPack_(t.asUint8Array(),E.MSG_TYPE.MSG_CONTROL,E.MSG_CONTROL_TYPE.MSG_CONTROL_SCREEN);this.sendMessage(n)},U.prototype.checkControlError_=function(t){return 0!==t&&t!==E.CONTROL_ERROR.EP_START_APP_FAILED?this.onControllerError&&"function"==typeof this.onControllerError&&this.onControllerError(t,"play error, code:"+t):E.EVENT.SCREEN_ROTATION,0===t},U.prototype.getHead_=function(t){var e={},n=new DataView(t,0,6);return e.mainType=n.getUint8(0),e.subType=n.getUint8(1),e.len=n.getUint32(2,!0),e},U.prototype.sendHello_=function(){var t=(new Date).getTime(),e=(t-t%1e3)/1e3,n=t%4294967295,o=(t-n)/4294967295,i=e%4294967295,r=(e-i)/4294967295,s=new Uint8Array([71,67,80,50,0,0,2,0,255&i,i>>>8&255,i>>>16&255,i>>>24&255,255&r,r>>>8&255,r>>>16&255,r>>>24&255,255&n,n>>>8&255,n>>>16&255,n>>>24&255,255&o,o>>>8&255,o>>>16&255,o>>>24&255,0,0,0,0,0,0,0,0]);this.sendMessage("helloBuff",s),this.net_status_=this.net_stat_list_.sayhello},U.prototype.sendVerify_=function(t){var e=new JSEncrypt;e.setPublicKey("MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAyEV8CQF1ScROYY/On0sn3AL+hmhAugsU0U5mCfg20HP9acivvfkv3TloPB3W/3SArDy+PlLr9AbxOE530smMwq0I10m2BDkw6+hl4Y7lNtUh8p6mddrhlIKLkddINnJ1ohATwsr7q7qn+2Bgc7YnY0aIEhgWvc0y0Lr5vh/sKlbqaoVIefe7rDRLdaMDlx+aEemO8d4RGrbIpPyu1n9qW0fHW3715hcL/g/8Tah4IPxzQsaiGhMy6VHf1NdqJa8kgEgcyRzfZjLMcifPa8NOwBDql8jBwsHkSagouDBrnzfhWdChLkkGA/veDY0edKsfI0H/BkwIS19DjhF95+xHBwIDAQAB");var n=e.encrypt(t);n=n.substring(0,256),this.sendMessage(n)},U.prototype.readLittle32_=function(t,e){return new DataView(t.buffer,e,4).getUint32(0,!0)},U.prototype.sendHelloAnswer_=function(){var t=(new Date).getTime(),e=new Uint8Array([t>>>56&255,t>>>48&255,t>>>40&255,t>>>32&255,t>>>24&255,t>>>16&255,t>>>8&255,255&t]);this.sendMessage(e)},U.prototype.setuint8_=function(t,e,n){new DataView(t.buffer,e,1).setUint8(0,n,!0)},U.prototype.setuint32_=function(t,e,n){new DataView(t.buffer,e,4).setUint32(0,n,!0)},U.prototype.getFlatPack_=function(t,e,n){var o=new Uint8Array(t.byteLength+6);return this.setuint8_(o,0,e),this.setuint8_(o,1,n),this.setuint32_(o,2,t.byteLength),o.set(t,6),o},U.prototype.sendShakeOnline_=function(t,e,n,o){var i=new T.Builder(0),r=i.createString(t),s=i.createString(e),a=i.createString(n),u=i.createString(o);O.ShakeOnline.startShakeOnline(i),O.ShakeOnline.addId(i,r),O.ShakeOnline.addToken(i,s),O.ShakeOnline.addServer(i,a),O.ShakeOnline.addApp(i,u),O.ShakeOnline.addType(i,1);var p=O.ShakeOnline.endShakeOnline(i);i.finish(p);var d=this.getFlatPack_(i.asUint8Array(),E.MSG_TYPE.MSG_SHAKE,E.MSG_SHAKE_TYPE.MSG_SHAKE_ONLINE);this.sendMessage(d)},U.prototype.sendKey_=function(t,e){var n=new T.Builder(0);O.InputKeyboard.startInputKeyboard(n),O.InputKeyboard.addKey(n,t),O.InputKeyboard.addPressed(n,e);var o=O.InputKeyboard.endInputKeyboard(n);n.finish(o);var i=this.getFlatPack_(n.asUint8Array(),E.MSG_TYPE.MSG_INPUT,E.MSG_INPUT_TYPE.MSG_INPUT_KEYBOARD);this.sendMessage(i)},U.prototype.sendInputString_=function(t){var e=new T.Builder(0),n=e.createString(t);O.InputString.startInputString(e),O.InputString.addStr(e,n);var o=O.InputString.endInputString(e);e.finish(o);var i=this.getFlatPack_(e.asUint8Array(),E.MSG_TYPE.MSG_INPUT,E.MSG_INPUT_TYPE.MSG_INPUT_STRING);this.sendMessage(i)},U.prototype.sendTouch_=function(t,e,n){var o=new T.Builder(0),i=[];i.push(O.TouchInfo.createTouchInfo(o,e,n,0)),O.InputTouch.startTouchVector(o,i.length);var r=o.endVector();O.InputTouch.startInputTouch(o);var s=1==t?0:1;O.InputTouch.addIndex(o,s),O.InputTouch.addType(o,t),O.InputTouch.addTouch(o,r);var a=O.InputTouch.endInputTouch(o);o.finish(a);var u=this.getFlatPack_(o.asUint8Array(),E.MSG_TYPE.MSG_INPUT,E.MSG_INPUT_TYPE.MSG_INPUT_TOUCH);this.sendMessage(u)},U.prototype.sendTouchMulti_=function(t,e){for(var n=new T.Builder(0),o=[],i=0;i<e.length;i++)o.push(O.TouchInfo.createTouchInfo(n,e[i].x,e[i].y,0));O.InputTouch.startTouchVector(n,o.length);var r=n.endVector();O.InputTouch.startInputTouch(n),O.InputTouch.addIndex(n,e.length),O.InputTouch.addType(n,t),O.InputTouch.addTouch(n,r);var s=O.InputTouch.endInputTouch(n);n.finish(s);var a=this.getFlatPack_(n.asUint8Array(),E.MSG_TYPE.MSG_INPUT,E.MSG_INPUT_TYPE.MSG_INPUT_TOUCH);this.sendMessage(a)},U.prototype.sendControlDelay_=function(){if(!(this.net_status_<this.net_stat_list_.sendshake)){var t=new T.Builder(0),e=t.createString(""+(new Date).getTime()),n=O.ControlDelay.createDataVector(t,new Uint8Array(1));O.ControlDelay.startControlDelay(t),O.ControlDelay.addTime(t,e),O.ControlDelay.addData(t,n);var o=O.ControlDelay.endControlDelay(t);t.finish(o);var i=this.getFlatPack_(t.asUint8Array(),E.MSG_TYPE.MSG_CONTROL,E.MSG_CONTROL_TYPE.MSG_CONTROL_DELAY);this.sendMessage(i)}},U.prototype.sendControlDelayR_=function(t,e){var n=O.ControlDelayR.getRootAsControlDelayR(t),o=(new Date).getTime()-n.time(),i=new T.Builder(0);this.onControlDelay(o,e,20);var r=i.createString(o+"##"+e+"##20##"+navigator.userAgent),s=O.ControlDelayR.createDataVector(i,new Uint8Array(1));O.ControlDelayR.startControlDelayR(i),O.ControlDelayR.addTime(i,r),O.ControlDelayR.addData(i,s);var a=O.ControlDelayR.endControlDelayR(i);i.finish(a);var u=this.getFlatPack_(i.asUint8Array(),E.MSG_TYPE.MSG_CONTROL,E.MSG_CONTROL_TYPE.MSG_CONTROL_DELAY_R);this.sendMessage(u)},U.prototype.onControlDelay=function(t,e,n){this.config_.isDebug&&console.log("mg ,sendControlDelayR_: delayTime:"+t+"##"+e+"##"+n)},U.prototype.controlSetConfRoom_=function(t){var e={category:"webrtc",cmd:"rtcServerConf",param:t};this.sendCommJson_(JSON.stringify(e))},U.prototype.controlJoinRoom_=function(t){var e={category:"webrtc",cmd:"joinRoom",param:t};this.sendCommJson_(JSON.stringify(e))},U.prototype.controlLeaveRoom_=function(t){var e={category:"webrtc",cmd:"leaveRoom",param:t};this.sendCommJson_(JSON.stringify(e))},U.prototype.sendCommJson_=function(t){var e=h.stringToUint8Array(t),n=this.getFlatPack_(e,E.MSG_TYPE.MSG_COMM,E.MSG_COMM_TYPE.MSG_COMM_JSON);this.sendMessage(n)},U.prototype.startTouch=function(t,e){t&&(this.elemVideoId_=t,F.startTouch(t,this,e))},U.prototype.sendCommand=function(t){this.sendKey_(t,!0),this.sendKey_(t,!1)},U.prototype.sendKey_=function(t,e){var n=new T.Builder(0);O.InputKeyboard.startInputKeyboard(n),O.InputKeyboard.addKey(n,t),O.InputKeyboard.addPressed(n,e);var o=O.InputKeyboard.endInputKeyboard(n);n.finish(o);var i=this.getFlatPack_(n.asUint8Array(),E.MSG_TYPE.MSG_INPUT,E.MSG_INPUT_TYPE.MSG_INPUT_KEYBOARD);this.sendMessage(i)},U.prototype.setPhoneRotation_=function(t){F.setPageVideoPotation(t),this.onPageVideoPotation&&"function"==typeof this.onPageVideoPotation&&this.onPageVideoPotation(t)},U.prototype.stop=function(){this.sendMessage("webSocketClose",0),null!=this.websocketWorker_&&(this.websocketWorker_.terminate(),this.websocketWorker_=null),null!=this.heartbeatInterval_&&(window.clearInterval(this.heartbeatInterval_),this.heartbeatInterval_=null)};function t(t){this.appController=null,this.appWebRTC=null,this.startPlay_=null,this.startControlAndRtc_=null,this.init(t)}var N={getStr:function(){self.sendUrlRequest=function(i,r,s,a){return new Promise(function(t,e){function n(){200===o.status?t(o.responseText):e(Error("Status="+o.status+", response="+o.responseText))}var o;o=new XMLHttpRequest,s&&(o.onreadystatechange=function(){4===o.readyState&&n()}),o.open(i,r,s),a&&o.send(a),s||n()})},self.httpPost=function(t,e){self.sendUrlRequest("POST",t,!0,e).then(function(t){self.postMessage({req:"post",res:t})}).catch(function(t){console.log("MgHttpAsyncRequest httpPost error:"+t.message)})},self.httpGet=function(t){self.sendUrlRequest("GET",t,!0).then(function(t){self.postMessage({req:"get",res:t})}).catch(function(t){console.log("MgHttpAsyncRequest httpGet error:"+t.message)})},self.onmessage=function(t){var e=t.data;switch(e.type){case"get":self.httpGet(e.value.url);break;case"post":self.httpPost(e.value.url,e.value.data);break;default:console.log("MgHttpAsyncRequest--onmessage: default ")}}}.toString()},D={evtbase:{page_base:1e3,play_base:1100},isOnLine:!1,httpReqWorker:null},B={page_open:D.evtbase.page_base+1,page_close:D.evtbase.page_base+2,play_video_start:D.evtbase.play_base+1,play_pc_stats:D.evtbase.play_base+2,play_error:D.evtbase.play_base+3,play_close:D.evtbase.play_base+4},G={pageTimestamp:0,clentSdkPkgName:"webrtc.wv.swad.jssdk",clentAppPkgName:"",rtcRoomId:"",rtcCodec:"",appName:"",appDetId:0,appPkg:"",playPkg:"",deviceImei:"",deviceNetType:"",deviceModel:"",osVersionName:"",padCode:"",jsSdkVersionCode:0},j={init:function(t,e){if(D.isOnLine=t,e=e||{},Object.assign(G,e),!0===D.isOnLine)if("undefined"!=typeof Worker){var n=new Blob(["(",N.getStr,")()"],{type:"application/javascript"});n=window.URL.createObjectURL(n),D.httpReqWorker=new Worker(n)}else h.trace("此浏览器不支持 Worker","MgAppLogUtil.init_")},eventType:B,addBaseLog:function(t,e){h.trace("addBaseLog_ isSendLog:"+D.isOnLine+",eventType:"+t,"MgAppLogUtil.addBaseLog_");var n,o,i={},r=Object.assign({},G),s=[];e=e||{},r.pageTimestamp=(new Date).getTime(),r.action=t,Object.assign(r,e),i.eventName=t,i.eventData=r,s.push(i),D.isOnLine&&!0===D.isOnLine?(n="http://swad.nlog.91xmy.com/v1/com.isw.swad.sdk.webrtc.wv?appkey=EnN6FaoeINHwknm58KxMWzaM&encrypt=0",o=JSON.stringify(s),D.httpReqWorker&&D.httpReqWorker.postMessage({type:"post",value:{url:n,data:o}})):h.trace("addBaseLog_ isSendLog:"+D.isOnLine+",bodySz:"+JSON.stringify(s),"MgAppLogUtil.addBaseLog_")}},K={versionInfo:{name:"mg-webrtc-jssdk-1.0.1",code:10001},base:{isOperate:!0,isDebug:!1},rtcConfig:{roomId:null,elementId:"video_box",elementVideoId:"video_remote",roomServer:"https://dev.webrtc.shunwanzu.cn",wssUrl:"wss://dev.webrtc.shunwanzu.cn:8089/ws",wssPostUrl:"",iceServerRequestUrl:"https://dev.webrtc.shunwanzu.cn/iceconfig",peerConnectionConfig:{}},paasConfig:{playType:0,playValue:"",playSdkApiUrl:"http://xxx.com/api",playSdkApiBody:'{"header":{"appPackageName":"com.demo.webrtc.jssdk","appVersionCode":1,"appVersionName":"0.1.1","appChannel":"demo_1000","ticks":'+(new Date).getTime()+',"uuid":"webrtc-uuid","deviceBrand":"webrtc","deviceModel":"webrtc","deviceImei":"webrtc-imei"},"body":{}}',controlInfo:{},playKeepaliveUrl:"http://xxx.com/api/keepalive",playAppPackage:"",tryPlayTime:3600},videoConfig:{videoConf:{vCodec:"H264",vBitrate:4096,vLevel:2}},events:{onInit:null,onControllerReady:null,onWebrtcReady:null,onStart:null,onPlaying:null,onError:null,onStop:null},logs:{isUse:!1,isOnline:!1,pcStatsIntervalMS:12e4},methods:{},timers:{joinRoomTimer:null,keepaliveInterval:null,pcStatsInterval:null}},H=function(t,e){var n=document.createElement("video"),o=_("#"+t);n.autoplay=!0,n.playsinline=!0,n.muted=!0,n.width=288,n.height=512,n.id=e,n.style.cssText=" margin: 0 auto; display: block;",o.style.cssText=" width: 100%;  height: 100%; display: flex; justify-content: center; align-items: center; overflow: hidden;",o.appendChild(n)};return t.prototype.init=function(t){for(var e in(t=t||{}).rtcConfig=t.rtcConfig||{},h.objAssign(K.rtcConfig,t.rtcConfig),K.rtcConfig.roomId||(K.rtcConfig.roomId=h.getUniqueId()),t.paasConfig=t.paasConfig||{},t.paasConfig)K.paasConfig[e]=t.paasConfig[e];for(var e in t.events=t.events||{},t.events)K.events[e]=t.events[e];return t.videoConfig=t.videoConfig||{},h.objAssign(K.videoConfig,t.videoConfig),t.logs=t.logs||{},h.objAssign(K.logs,t.logs),this.startPlay_=function(){var o={},i=this;if(0===K.paasConfig.playType)o="string"==typeof(o=K.paasConfig.playValue)?JSON.parse(o):o,K.paasConfig.controlInfo=o,i.startControlAndRtc_(o);else{var t=K.paasConfig.playSdkApiUrl,e=K.paasConfig.playSdkApiBody;switch(e=JSON.parse(e),K.paasConfig.playType){case 1:e.body={padCode:K.paasConfig.playValue,appId:0};break;case 2:e.body={appId:K.paasConfig.playValue};break;case 3:e.body={appPackageName:K.paasConfig.playValue}}e=JSON.stringify(e),h.sendAsyncUrlRequest("POST",t,e).then(function(t){var e=h.parseJSON(t);if(!e||e.status+""!="200")return K.timers.joinRoomTimer&&(clearTimeout(K.timers.joinRoomTimer),K.timers.joinRoomTimer=null),i.stop&&i.stop(),K.events.onError&&"function"==typeof K.events.onError&&K.events.onError("paasApi",R.ERROR_PAASAPI_DATA_NULL,"paas api data is null"),console.log("mg , index paas api data is null"),!1;K.paasConfig.playAppPackage=e.data.packageName?e.data.packageName:K.paasConfig.playAppPackage,K.paasConfig.tryPlayTime=e.data.tryPlayTime?e.data.tryPlayTime:K.paasConfig.tryPlayTime,o=e.data.connectInfo;var n=e.data.playId;K.timers.keepaliveInterval||(K.timers.keepaliveInterval=setInterval(function(){var t=K.paasConfig.playKeepaliveUrl,e=K.paasConfig.playSdkApiBody;(e=JSON.parse(e)).body={playId:n},h.sendAsyncUrlRequest("POST",t,JSON.stringify(e)).then(function(t){}).catch(function(t){console.log("mg , index ,catch,keepaliveTimer:"+t)})},6e4)),console.log("mg , index ,sendAsyncUrlRequest-POST , success"),i.startControlAndRtc_(o)}).catch(function(t){console.log("mg , index ,catch,error:"+t),K.timers.joinRoomTimer&&(clearTimeout(K.timers.joinRoomTimer),K.timers.joinRoomTimer=null),i.stop&&i.stop(),K.events.onError&&"function"==typeof K.events.onError&&K.events.onError("appController",R.ERROR_APPCONTROLLER_CATCH,"request  paas api  error")})}}.bind(this),this.startControlAndRtc_=function(t){var n=this;if(!t||!t.resultInfo)return console.log("mg , controlInfo is null "),n.stop&&n.stop(),K.events.onError&&K.events.onError("appController",R.ERROR_APPCONTROLLER_PARAM,"control param error"),!1;t.roomId=K.rtcConfig.roomId,!t.videoConf&&K.videoConfig.videoConf&&(t.videoConf=K.videoConfig.videoConf),t.videoConf&&t.videoConf.vCodec&&(K.rtcConfig.videoRecvCodec=t.videoConf.vCodec),K.videoConfig.videoConf=t.videoConf;var e=n.appController=new U;e.startPlay(t,0,K.paasConfig.playAppPackage),t.resultInfo.webControlList=t.resultInfo.webControlList||[],t.resultInfo.webControlList[0].webControlCode=t.resultInfo.webControlList[0].webControlCode||{};var o=t.resultInfo.webControlList[0].webControlCode;if(o&&0<o.length){var i=(o.split("-")[0]+"").toLocaleLowerCase(),r=-1<K.rtcConfig.iceServerRequestUrl.indexOf("?")?"&":"?";K.rtcConfig.iceServerRequestUrl=K.rtcConfig.iceServerRequestUrl+r+"key="+i+"_myapprtc"}K.rtcConfig.elementVideoId="video-id-"+(new Date).getTime(),H(K.rtcConfig.elementId,K.rtcConfig.elementVideoId);var s=n.appWebRTC=new A(K.rtcConfig),a=0;s.onShowRemoteVideo=function(t){a=t,K.events.onStart&&K.events.onStart(),e.startTouch(K.rtcConfig.elementVideoId,K.base.isOperate),K.timers.joinRoomTimer&&(clearTimeout(K.timers.joinRoomTimer),K.timers.joinRoomTimer=null),K.logs.isUse&&j.addBaseLog(j.eventType.play_video_start,{})},e.onControllerError=function(t,e){n.stop&&n.stop(),K.events.onError&&K.events.onError("appController",t,e)},s.onDisplayError=function(t,e){n.stop&&n.stop(),K.events.onError&&K.events.onError("appWebRTC",t,e)};var u={},p=!0;e.onControlDelay=function(t,e,n){Object.assign(u,{controlDelay:t})},s.onPeerClientStats=function(t){if(Object.assign(u,t),!0===K.logs.isUse&&1==p){var e=Object.assign({},u);e.peerCallSetupTime=a,j.addBaseLog(j.eventType.play_pc_stats,e),p=!1}},!0===K.logs.isUse&&(K.timers.pcStatsInterval=setInterval(function(){j.addBaseLog(j.eventType.play_pc_stats,u)},K.logs.pcStatsIntervalMS))}.bind(this),this},t.prototype.start=function(){this.startPlay_();var t=this;K.timers.joinRoomTimer||(K.timers.joinRoomTimer=setTimeout(function(){t.stop&&t.stop(),K.events.onError&&K.events.onError("appWebRTC",R.ERROR_APPWEBRTC_CALL_TIMEOUT,"呼叫超时,15s")},15e3)),K.paasConfig.controlInfo=K.paasConfig.controlInfo||{},K.paasConfig.controlInfo.appBaseHeader=K.paasConfig.controlInfo.appBaseHeader||{},!0===K.logs.isUse&&(j.init(K.logs.isOnline,{clentAppPkgName:K.paasConfig.controlInfo.appBaseHeader.appPackageName||"",appDetId:K.paasConfig.controlInfo.appDetailId||0,appPkg:K.paasConfig.controlInfo.appPkgName||0,appName:K.paasConfig.controlInfo.appName||"",playPkg:K.paasConfig.playAppPackage||"",deviceImei:K.paasConfig.controlInfo.appBaseHeader.deviceImei||K.versionInfo.name+"-imei",deviceNetType:K.paasConfig.controlInfo.appBaseHeader.deviceNetType||"",deviceModel:K.paasConfig.controlInfo.appBaseHeader.deviceModel||"",osVersionName:K.paasConfig.controlInfo.appBaseHeader.osVersionName||"",rtcRoomId:K.rtcConfig.roomId||"",rtcCodec:K.videoConfig.videoConf.vCodec||"",padCode:K.paasConfig.controlInfo.padCode||"",jsSdkVersionCode:K.versionInfo.code}),j.addBaseLog(j.eventType.page_open,{}))},t.prototype.enableSound=function(){_("#"+K.rtcConfig.elementVideoId).muted=!1},t.prototype.stop=function(){this.appController&&this.appController.stop&&this.appController.stop(),this.appWebRTC&&this.appWebRTC.stop&&this.appWebRTC.stop(),K.timers.keepaliveInterval&&(clearInterval(K.timers.keepaliveInterval),K.timers.keepaliveInterval=null),K.timers.pcStatsInterval&&(window.clearInterval(K.timers.pcStatsInterval),K.timers.pcStatsInterval=null),K.events.onStop&&K.events.onStop(),K.logs.isUse&&j.addBaseLog(j.eventType.play_close,{})},t.prototype.setVideoConf=function(t){K.videoConfig.videoConf=t},window.onbeforeunload=function(t){K.logs.isUse&&j.addBaseLog(j.eventType.page_close,{}),console.log("index-sdk onbeforeunload closepage"),window.onbeforeunload=null},window.$=_,window.MgUtil=h,window.mgRtcPlayer=new t,t});
